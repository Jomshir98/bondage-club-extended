{"version":3,"file":"bcx.js","sources":["../src/utilsClub.ts","../src/config.ts","../src/utils.ts","../src/patching.ts","../src/moduleManager.ts","../src/main.ts","../src/modules/messaging.ts","../src/characters.ts","../src/modules/storage.ts","../src/modules/authority.ts","../src/resources.ts","../src/modules/chatroom.ts","../src/modules/wardrobe.ts","../src/modules/console.ts","../src/modules/commands.ts","../src/modules/clubUtils.ts","../src/gui/subscreen.ts","../src/gui/authority_roles.ts","../src/gui/authority_dialogMin.ts","../src/gui/authority_dialogSelf.ts","../src/gui/authority_permissions.ts","../src/gui/mainmenu.ts","../src/modules/gui.ts","../src/modules/miscPatches.ts","../src/modules/versionCheck.ts","../src/modules.ts","../src/index.ts"],"sourcesContent":["export function InfoBeep(msg: string) {\n\tconsole.log(`BCX msg: ${msg}`);\n\tServerBeep = {\n\t\tTimer: Date.now() + 3000,\n\t\tMessage: msg\n\t};\n}\n\nexport function ChatRoomActionMessage(msg: string) {\n\tif (!msg) return;\n\tServerSend(\"ChatRoomChat\", {\n\t\tContent: \"Beep\",\n\t\tType: \"Action\",\n\t\tDictionary: [\n\t\t\t{ Tag: \"Beep\", Text: \"msg\" },\n\t\t\t{ Tag: \"Biep\", Text: \"msg\" },\n\t\t\t{ Tag: \"Sonner\", Text: \"msg\" },\n\t\t\t{ Tag: \"msg\", Text: msg }\n\t\t]\n\t});\n}\n\nexport function ChatRoomSendLocal(msg: string | Node, timeout?: number, sender?: number) {\n\t// Adds the message and scrolls down unless the user has scrolled up\n\tconst div = document.createElement(\"div\");\n\tdiv.setAttribute(\"class\", \"ChatMessage ChatMessageLocalMessage\");\n\tdiv.setAttribute(\"data-time\", ChatRoomCurrentTime());\n\tdiv.setAttribute('data-sender', `${sender ?? Player.MemberNumber ?? 0}`);\n\n\tif (typeof msg === 'string')\n\t\tdiv.innerText = msg;\n\telse\n\t\tdiv.appendChild(msg);\n\n\tif (timeout) setTimeout(() => div.remove(), timeout);\n\n\t// Returns the focus on the chat box\n\tconst Refocus = document.activeElement?.id === \"InputChat\";\n\tconst ShouldScrollDown = ElementIsScrolledToEnd(\"TextAreaChatLog\");\n\tconst ChatLog = document.getElementById(\"TextAreaChatLog\");\n\tif (ChatLog != null) {\n\t\tChatLog.appendChild(div);\n\t\tif (ShouldScrollDown) ElementScrollToEnd(\"TextAreaChatLog\");\n\t\tif (Refocus) ElementFocus(\"InputChat\");\n\t}\n}\n\nexport function detectOtherMods() {\n\tconst w = window as any;\n\treturn {\n\t\tNMod: typeof w.ChatRoomDrawFriendList === \"function\",\n\t\tBondageClubTools: ServerSocket.listeners(\"ChatRoomMessage\").some(i => i.toString().includes(\"window.postMessage\"))\n\t};\n}\n\n/**\n * Draws an image on canvas, applying all options\n * @param {string | HTMLImageElement | HTMLCanvasElement} Source - URL of image or image itself\n * @param {number} X - Position of the image on the X axis\n * @param {number} Y - Position of the image on the Y axis\n * @param {object} [options] - any extra options, optional\n * @param {CanvasRenderingContext2D} [options.Canvas] - Canvas on which to draw the image, defaults to `MainCanvas`\n * @param {number} [options.Alpha] - transparency between 0-1\n * @param {[number, number, number, number]} [options.SourcePos] - Area in original image to draw in format `[left, top, width, height]`\n * @param {number} [options.Width] - Width of the drawn image, defaults to width of original image\n * @param {number} [options.Height] - Height of the drawn image, defaults to height of original image\n * @param {boolean} [options.Invert=false] - If image should be flipped vertically\n * @param {boolean} [options.Mirror=false] - If image should be flipped horizontally\n * @param {number} [options.Zoom=1] - Zoom factor\n * @returns {boolean} - whether the image was complete or not\n */\nexport function DrawImageEx(\n\tSource: string | HTMLImageElement | HTMLCanvasElement,\n\tX: number,\n\tY: number,\n\t{\n\t\tCanvas = MainCanvas,\n\t\tAlpha = 1,\n\t\tSourcePos,\n\t\tWidth,\n\t\tHeight,\n\t\tInvert = false,\n\t\tMirror = false,\n\t\tZoom = 1\n\t}: {\n\t\tCanvas?: CanvasRenderingContext2D;\n\t\tAlpha?: number;\n\t\tSourcePos?: [number, number, number, number];\n\t\tWidth?: number;\n\t\tHeight?: number;\n\t\tInvert?: boolean;\n\t\tMirror?: boolean;\n\t\tZoom?: number;\n\t} = {}\n) {\n\tif (typeof Source === \"string\") {\n\t\tSource = DrawGetImage(Source);\n\t\tif (!Source.complete) return false;\n\t\tif (!Source.naturalWidth) return true;\n\t}\n\n\tconst sizeChanged = Width != null || Height != null;\n\tif (Width == null) {\n\t\tWidth = SourcePos ? SourcePos[2] : Source.width;\n\t}\n\tif (Height == null) {\n\t\tHeight = SourcePos ? SourcePos[3] : Source.height;\n\t}\n\n\tCanvas.save();\n\n\tCanvas.globalCompositeOperation = \"source-over\";\n\tCanvas.globalAlpha = Alpha;\n\tCanvas.translate(X, Y);\n\n\tif (Zoom !== 1) {\n\t\tCanvas.scale(Zoom, Zoom);\n\t}\n\n\tif (Invert) {\n\t\tCanvas.transform(1, 0, 0, -1, 0, Height);\n\t}\n\n\tif (Mirror) {\n\t\tCanvas.transform(-1, 0, 0, 1, Width, 0);\n\t}\n\n\tif (SourcePos) {\n\t\tCanvas.drawImage(Source, SourcePos[0], SourcePos[1], SourcePos[2], SourcePos[3], 0, 0, Width, Height);\n\t} else if (sizeChanged) {\n\t\tCanvas.drawImage(Source, 0, 0, Width, Height);\n\t} else {\n\t\tCanvas.drawImage(Source, 0, 0);\n\t}\n\n\tCanvas.restore();\n\treturn true;\n}\n\nexport function isCloth(item: Item | Asset, allowCosplay: boolean = false): boolean {\n\tconst asset = (item as any).Asset ? (item as Item).Asset : item as Asset;\n\treturn asset.Group.Category === \"Appearance\" && asset.Group.AllowNone && asset.Group.Clothing && (allowCosplay || !asset.Group.BodyCosplay);\n}\n\nexport function isBind(item: Item | Asset): boolean {\n\tconst asset = (item as any).Asset ? (item as Item).Asset : item as Asset;\n\tif (asset.Group.Category !== \"Item\" || asset.Group.BodyCosplay) return false;\n\treturn ![\"ItemNeck\", \"ItemNeckAccessories\", \"ItemNeckRestraints\"].includes(asset.Group.Name);\n}\n","export const VERSION = \"0.1.1\";\n\nexport const VERSION_CHECK_BOT: number = 37685;\n\nexport const FUNCTION_HASHES: Record<string, string[]> = {\n\tAppearanceClick: [\"CA4ED810\"],\n\tAppearanceRun: [\"904E8E84\", \"066E8E43\"],\n\tAsylumEntranceCanWander: [\"3F5F4041\"],\n\tChatRoomCanLeave: [\"B964B0B0\"],\n\tChatRoomClearAllElements: [\"D1E1F8C3\", \"D0FE8299\"],\n\tChatRoomCreateElement: [\"4837C2F6\", \"F1D4043C\"],\n\tChatRoomDrawCharacterOverlay: [\"1E1A1B60\"],\n\tChatRoomKeyDown: [\"C6EEC498\"],\n\tChatRoomMessage: [\"2C6E4EC3\", \"FF31370D\"],\n\tChatRoomSendChat: [\"39B06D87\", \"589B50FD\"],\n\tCheatImport: [\"412422CC\", \"1ECB0CC4\"],\n\tDialogDrawExpressionMenu: [\"071C32ED\"],\n\tDialogDrawItemMenu: [\"E0313EBF\"],\n\tDialogDrawPoseMenu: [\"6145B7D7\"],\n\tElementIsScrolledToEnd: [\"064E4232\"],\n\tExtendedItemDraw: [\"486A52DF\", \"59BAFBC6\"],\n\tInformationSheetClick: [\"39AD580B\"],\n\tInformationSheetExit: [\"4BC15B0A\"],\n\tInformationSheetRun: [\"58B7879C\", \"B96EA18A\"],\n\tLoginMistressItems: [\"984A6AD9\"],\n\tLoginResponse: [\"16C2C651\", \"2E1916A1\"],\n\tLoginStableItems: [\"C3F50DD1\"],\n\tServerAccountBeep: [\"0057EF1D\"],\n\tSpeechGarble: [\"1BC8E005\", \"CF18316C\"]\n};\n\nexport const FUNCTION_HASHES_NMOD: Record<string, string[]> = {\n\tAppearanceClick: [\"B895612C\"],\n\tAppearanceRun: [\"791E142F\"],\n\tAsylumEntranceCanWander: [\"3F5F4041\"],\n\tChatRoomCanLeave: [\"7EDA9A86\"],\n\tChatRoomClearAllElements: [\"C2131E9B\"],\n\tChatRoomCreateElement: [\"76299AEC\"],\n\tChatRoomDrawFriendList: [\"327DA1B8\"],\n\tChatRoomKeyDown: [\"D41B4525\"],\n\tChatRoomMessage: [\"4BC817B8\"],\n\tChatRoomSendChat: [\"385B9E9C\"],\n\tCheatImport: [\"1ECB0CC4\"],\n\tDialogDrawExpressionMenu: [\"EEFB3D22\"],\n\tDialogDrawItemMenu: [\"7C83D23C\"],\n\tDialogDrawPoseMenu: [\"4B146E82\"],\n\tElementIsScrolledToEnd: [\"D28B0638\"],\n\tExtendedItemDraw: [\"9256549A\"],\n\tInformationSheetClick: [\"E535609B\"],\n\tInformationSheetExit: [\"75521907\"],\n\tInformationSheetRun: [\"19872251\"],\n\tLoginMistressItems: [\"984A6AD9\"],\n\tLoginResponse: [\"E77283C0\"],\n\tLoginStableItems: [\"C3F50DD1\"],\n\tServerAccountBeep: [\"A6DFD3B9\"],\n\tSpeechGarble: [\"99C1A7BA\"]\n};\n","\nconst encoder = new TextEncoder();\n\n/* eslint-disable no-bitwise */\nexport function crc32(str: string): string {\n\tlet crc = 0 ^ -1;\n\tfor (const b of encoder.encode(str)) {\n\t\tlet c = (crc ^ b) & 0xff;\n\t\tfor (let j = 0; j < 8; j++) {\n\t\t\tc = (c & 1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1);\n\t\t}\n\t\tcrc = (crc >>> 8) ^ c;\n\t}\n\n\treturn ((crc ^ -1) >>> 0).toString(16).padStart(8, \"0\").toUpperCase();\n}\n/* eslint-enable no-bitwise */\n\n/** Utility function to add CSS */\nexport function addStyle(styleString: string): void {\n\tconst style = document.createElement(\"style\");\n\tstyle.textContent = styleString;\n\tdocument.head.append(style);\n}\n\n/**\n * Waits for set amount of time, returning promes\n * @param ms The time in ms to wait for\n */\nexport function wait(ms: number): Promise<void> {\n\treturn new Promise(r => setTimeout(r, ms));\n}\n\n/** Checks if the `obj` is an object (not null, not array) */\nexport function isObject(obj: unknown): obj is Record<string, any> {\n\treturn !!obj && typeof obj === \"object\" && !Array.isArray(obj);\n}\n\nexport function longestCommonPrefix(strings: string[]): string {\n\tif (strings.length === 0) return \"\";\n\n\tstrings = strings.slice().sort();\n\tlet i = 0;\n\twhile (i < strings[0].length && strings[0][i] === strings[strings.length - 1][i]) {\n\t\ti++;\n\t}\n\treturn strings[0].substring(0, i);\n}\n\nexport function arrayUnique<T>(arr: T[]): T[] {\n\tconst seen = new Set<T>();\n\treturn arr.filter(i => !seen.has(i) && seen.add(i));\n}\n\nexport function capitalizeFirstLetter(str: string): string {\n\treturn str.charAt(0).toLocaleUpperCase() + str.slice(1);\n}\n\n/* eslint-disable no-bitwise */\nexport function uuidv4() {\n\treturn \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, (c: any) =>\n\t\t(c ^ (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(16)\n\t);\n}\n/* eslint-enable no-bitwise */\n\nexport const clipboardAvailable = Boolean(navigator.clipboard);\n","import { FUNCTION_HASHES, FUNCTION_HASHES_NMOD } from \"./config\";\nimport { crc32 } from \"./utils\";\nimport { detectOtherMods } from \"./utilsClub\";\n\ntype PatchHook = (args: any[], next: (args: any[]) => any) => any;\n\ninterface IpatchedFunctionData {\n\toriginal: (...args: any[]) => any;\n\tfinal: (...args: any[]) => any;\n\thooks: {\n\t\thook: PatchHook;\n\t\tpriority: number;\n\t}[];\n\tpatches: Record<string, string>;\n}\n\nconst patchedFunctions: Map<string, IpatchedFunctionData> = new Map();\nlet unloaded: boolean = false;\n\n\nfunction makePatchRouter(data: IpatchedFunctionData): (...args: any[]) => any {\n\treturn (...args: any[]) => {\n\t\tif (unloaded) {\n\t\t\tconsole.warn(`BCX: Function router called while unloaded for ${data.original.name}`);\n\t\t\treturn data.original(...args);\n\t\t}\n\t\tconst hooks = data.hooks.slice();\n\t\tlet hookIndex = 0;\n\t\tconst callNextHook = (nextargs: any[]) => {\n\t\t\tif (hookIndex < hooks.length) {\n\t\t\t\thookIndex++;\n\t\t\t\treturn hooks[hookIndex-1].hook(nextargs, callNextHook);\n\t\t\t} else {\n\t\t\t\treturn data.final(...args);\n\t\t\t}\n\t\t};\n\t\treturn callNextHook(args);\n\t};\n}\n\nfunction initPatchableFunction(target: string): IpatchedFunctionData {\n\tif (unloaded) {\n\t\tthrow new Error(\"Cannot init patchable function after unload\");\n\t}\n\tlet result = patchedFunctions.get(target);\n\tif (!result) {\n\t\tconst original = (window as any)[target];\n\n\t\tconst { NMod } = detectOtherMods();\n\n\t\tconst expectedHashes = ( NMod ? FUNCTION_HASHES_NMOD : FUNCTION_HASHES)[target] ?? [];\n\n\t\tif (typeof original !== \"function\") {\n\t\t\tthrow new Error(`BCX: Function ${target} to be patched not found`);\n\t\t}\n\n\t\tconst hash = crc32(original.toString());\n\t\tif (!expectedHashes.includes(hash)) {\n\t\t\tconsole.warn(`BCX: Patched function ${target} has unknown hash ${hash}`);\n\t\t}\n\t\tconsole.debug(`BCX: Initialized ${target} for patching`);\n\n\t\tresult = {\n\t\t\toriginal,\n\t\t\tfinal: original,\n\t\t\thooks: [],\n\t\t\tpatches: {}\n\t\t};\n\t\tpatchedFunctions.set(target, result);\n\t\t(window as any)[target] = makePatchRouter(result);\n\t}\n\treturn result;\n}\n\nfunction applyPatches(info: IpatchedFunctionData) {\n\tif (Object.keys(info.patches).length === 0) {\n\t\tinfo.final = info.original;\n\t\treturn;\n\t}\n\tlet fn_str = info.original.toString();\n\tconst N = `BCX: Patching ${info.original.name}`;\n\tfor (const k of Object.keys(info.patches)) {\n\t\tif (!fn_str.includes(k)) {\n\t\t\tconsole.warn(`${N}: Patch ${k} not applied`);\n\t\t}\n\t\tfn_str = fn_str.replaceAll(k, info.patches[k]);\n\t}\n\t// eslint-disable-next-line no-eval\n\tinfo.final = eval(`(${fn_str})`);\n}\n\nexport function hookFunction(target: string, priority: number, hook: PatchHook): void {\n\tconst data = initPatchableFunction(target);\n\tdata.hooks.push({\n\t\thook,\n\t\tpriority\n\t});\n\tdata.hooks.sort((a, b) => b.priority - a.priority);\n}\n\nexport function patchFunction(target: string, patches: Record<string, string>): void {\n\tconst data = initPatchableFunction(target);\n\tObject.assign(data.patches, patches);\n\tapplyPatches(data);\n}\n\nexport function unload_patches() {\n\tunloaded = true;\n\tfor (const [k, v] of patchedFunctions.entries()) {\n\t\tv.hooks = [];\n\t\tv.patches = {};\n\t\tv.final = v.original;\n\t\t(window as any)[k] = v.original;\n\t}\n\tpatchedFunctions.clear();\n}\n","export abstract class BaseModule {\n\n\tinit() {\n\t\t// Empty\n\t}\n\n\tload() {\n\t\t// Empty\n\t}\n\n\trun() {\n\t\t// Empty\n\t}\n\n\tunload() {\n\t\t// Empty\n\t}\n}\n\nexport enum ModuleCategory {\n\tBasic,\n\tAuthority,\n\tMisc\n}\n\nexport const MODULE_NAMES: Record<ModuleCategory, string> = {\n\t[ModuleCategory.Basic]: \"Basic\",\n\t[ModuleCategory.Authority]: \"Authority\",\n\t[ModuleCategory.Misc]: \"Miscellaneous\"\n};\n\nexport const MODULE_ICONS: Record<ModuleCategory, string> = {\n\t[ModuleCategory.Basic]: \"Icons/General.png\",\n\t[ModuleCategory.Authority]: \"Icons/Security.png\",\n\t[ModuleCategory.Misc]: \"Icons/Random.png\"\n};\n\nexport const enum ModuleInitPhase {\n\tconstruct,\n\tinit,\n\tload,\n\tready,\n\tdestroy\n}\n\nexport let moduleInitPhase: ModuleInitPhase = ModuleInitPhase.construct;\nconst modules: BaseModule[] = [];\n\nexport function registerModule<T extends BaseModule>(module: T): T {\n\tif (moduleInitPhase !== ModuleInitPhase.construct) {\n\t\tthrow new Error(\"Modules can be registered only before initialization\");\n\t}\n\tmodules.push(module);\n\tconsole.debug(`BCX: Registered module ${module.constructor.name}`);\n\treturn module;\n}\n\nexport function init_modules() {\n\tmoduleInitPhase = ModuleInitPhase.init;\n\tfor (const m of modules) {\n\t\tm.init();\n\t}\n\tmoduleInitPhase = ModuleInitPhase.load;\n\tfor (const m of modules) {\n\t\tm.load();\n\t}\n\tmoduleInitPhase = ModuleInitPhase.ready;\n\tfor (const m of modules) {\n\t\tm.run();\n\t}\n}\n\nexport function unload_modules() {\n\tmoduleInitPhase = ModuleInitPhase.destroy;\n\tfor (const m of modules) {\n\t\tm.unload();\n\t}\n}\n","import { detectOtherMods, InfoBeep } from \"./utilsClub\";\nimport { VERSION } from \"./config\";\nimport { init_modules, unload_modules } from \"./moduleManager\";\nimport { unload_patches } from \"./patching\";\n\nexport function loginInit(C: any) {\n\tif (window.BCX_Loaded) return;\n\tinit();\n}\n\nexport function init() {\n\t// Loading into already loaded club - clear some caches\n\tDrawRunMap.clear();\n\tDrawScreen = \"\";\n\n\tinit_modules();\n\n\t//#region Other mod compatability\n\n\tconst { BondageClubTools } = detectOtherMods();\n\n\tif (BondageClubTools) {\n\t\tconsole.warn(\"BCX: Bondage Club Tools detected!\");\n\t\tconst ChatRoomMessageForwarder = ServerSocket.listeners(\"ChatRoomMessage\").find(i => i.toString().includes(\"window.postMessage\"));\n\t\tconst AccountBeepForwarder = ServerSocket.listeners(\"AccountBeep\").find(i => i.toString().includes(\"window.postMessage\"));\n\t\tconsole.assert(ChatRoomMessageForwarder !== undefined && AccountBeepForwarder !== undefined);\n\t\tServerSocket.off(\"ChatRoomMessage\");\n\t\tServerSocket.on(\"ChatRoomMessage\", data => {\n\t\t\tif (data?.Type !== \"Hidden\" || data.Content !== \"BCXMsg\" || typeof data.Sender !== \"number\") {\n\t\t\t\tChatRoomMessageForwarder!(data);\n\t\t\t}\n\t\t\treturn ChatRoomMessage(data);\n\t\t});\n\t\tServerSocket.off(\"AccountBeep\");\n\t\tServerSocket.on(\"AccountBeep\", data => {\n\t\t\tif (typeof data?.BeepType !== \"string\" || !data.BeepType.startsWith(\"Jmod:\")) {\n\t\t\t\tAccountBeepForwarder!(data);\n\t\t\t}\n\t\t\treturn ServerAccountBeep(data);\n\t\t});\n\t}\n\n\t//#endregion\n\n\twindow.BCX_Loaded = true;\n\tInfoBeep(`BCX loaded! Version: ${VERSION}`);\n}\n\nexport function unload() {\n\tconst { BondageClubTools } = detectOtherMods();\n\n\tif (BondageClubTools) {\n\t\tthrow new Error(\"BCX: Unload not supported when BondageClubTools are present\");\n\t}\n\n\tunload_patches();\n\tunload_modules();\n\n\t// clear some caches\n\tDrawRunMap.clear();\n\tDrawScreen = \"\";\n\n\tdelete window.BCX_Loaded;\n\tconsole.log(\"BCX: Unloaded.\");\n}\n","import { getPlayerCharacter } from \"../characters\";\nimport { BaseModule } from \"../moduleManager\";\nimport { hookFunction } from \"../patching\";\nimport { isObject, uuidv4 } from \"../utils\";\n\nexport const hiddenMessageHandlers: Map<keyof BCX_messages, (sender: number, message: any) => void> = new Map();\nexport const hiddenBeepHandlers: Map<keyof BCX_beeps, (sender: number, message: any) => void> = new Map();\n\nexport type queryResolveFunction<T extends keyof BCX_queries> = {\n\t(ok: true, data: BCX_queries[T][1]): void;\n\t(ok: false, error?: any): void;\n};\n\nexport const queryHandlers: {\n\t[K in keyof BCX_queries]?: (sender: number, resolve: queryResolveFunction<K>, data: BCX_queries[K][0]) => void;\n} = {};\n\nexport const changeHandlers: ((source: number) => void)[] = [];\n\nexport function sendHiddenMessage<T extends keyof BCX_messages>(type: T, message: BCX_messages[T], Target: number | null = null) {\n\tif (!ServerPlayerIsInChatRoom())\n\t\treturn;\n\tServerSend(\"ChatRoomChat\", {\n\t\tContent: \"BCXMsg\",\n\t\tType: \"Hidden\",\n\t\tTarget,\n\t\tDictionary: { type, message }\n\t});\n}\n\nexport function sendHiddenBeep<T extends keyof BCX_beeps>(type: T, message: BCX_beeps[T], target: number, asLeashBeep: boolean = false) {\n\tServerSend(\"AccountBeep\", {\n\t\tMemberNumber: target,\n\t\tBeepType: asLeashBeep ? \"Leash\" : \"BCX\",\n\t\tMessage: {\n\t\t\tBCX: { type, message }\n\t\t}\n\t});\n}\n\ninterface IPendingQuery {\n\ttarget: number;\n\tresolve: (data: any) => void;\n\treject: (data: any) => void;\n\ttimeout: number;\n}\n\nconst pendingQueries: Map<string, IPendingQuery> = new Map();\n\nexport function sendQuery<T extends keyof BCX_queries>(type: T, data: BCX_queries[T][0], target: number, timeout: number = 10_000): Promise<BCX_queries[T][1]> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst id = uuidv4();\n\t\tconst info: IPendingQuery = {\n\t\t\ttarget,\n\t\t\tresolve,\n\t\t\treject,\n\t\t\ttimeout: setTimeout(() => {\n\t\t\t\tconsole.warn(\"BCX: Query timed out\", target, type);\n\t\t\t\tpendingQueries.delete(id);\n\t\t\t\treject(\"Timed out\");\n\t\t\t}, timeout)\n\t\t};\n\t\tpendingQueries.set(id, info);\n\n\t\tsendHiddenMessage(\"query\", {\n\t\t\tid,\n\t\t\tquery: type,\n\t\t\tdata\n\t\t}, target);\n\n\t});\n}\n\nhiddenMessageHandlers.set(\"query\", (sender, message: BCX_message_query) => {\n\tif (!isObject(message) ||\n\t\ttypeof message.id !== \"string\" ||\n\t\ttypeof message.query !== \"string\"\n\t) {\n\t\tconsole.warn(`BCX: Invalid query`, sender, message);\n\t\treturn;\n\t}\n\n\tconst handler = queryHandlers[message.query] as (sender: number, resolve: queryResolveFunction<keyof BCX_queries>, data: any) => void;\n\tif (!handler) {\n\t\tconsole.warn(\"BCX: Query no handler\", sender, message);\n\t\treturn sendHiddenMessage(\"queryAnswer\", {\n\t\t\tid: message.id,\n\t\t\tok: false\n\t\t});\n\t}\n\n\thandler(sender, (ok, data) => {\n\t\tsendHiddenMessage(\"queryAnswer\", {\n\t\t\tid: message.id,\n\t\t\tok,\n\t\t\tdata\n\t\t}, sender);\n\t}, message.data);\n});\n\nhiddenMessageHandlers.set(\"queryAnswer\", (sender, message: BCX_message_queryAnswer) => {\n\tif (!isObject(message) ||\n\t\ttypeof message.id !== \"string\" ||\n\t\ttypeof message.ok !== \"boolean\"\n\t) {\n\t\tconsole.warn(`BCX: Invalid queryAnswer`, sender, message);\n\t\treturn;\n\t}\n\n\tconst info = pendingQueries.get(message.id);\n\tif (!info) {\n\t\tconsole.warn(`BCX: Response to unknown query`, sender, message);\n\t\treturn;\n\t}\n\n\tif (info.target !== info.target) {\n\t\tconsole.warn(`BCX: Response to query not from target`, sender, message, info);\n\t\treturn;\n\t}\n\n\tclearTimeout(info.timeout);\n\tpendingQueries.delete(message.id);\n\n\tif (message.ok) {\n\t\tinfo.resolve(message.data);\n\t} else {\n\t\tinfo.reject(message.data);\n\t}\n});\n\nhiddenMessageHandlers.set(\"somethingChanged\", (sender) => {\n\tchangeHandlers.forEach(h => h(sender));\n});\n\nexport function notifyOfChange(): void {\n\tsendHiddenMessage(\"somethingChanged\", undefined);\n\tconst player = getPlayerCharacter().MemberNumber;\n\tchangeHandlers.forEach(h => h(player));\n}\n\nexport class ModuleMessaging extends BaseModule {\n\tload() {\n\t\thookFunction(\"ChatRoomMessage\", 10, (args, next) => {\n\t\t\tconst data = args[0];\n\n\t\t\tif (data?.Type === \"Hidden\" && data.Content === \"BCXMsg\" && typeof data.Sender === \"number\") {\n\t\t\t\tif (data.Sender === Player.MemberNumber)\n\t\t\t\t\treturn;\n\t\t\t\tif (!isObject(data.Dictionary)) {\n\t\t\t\t\tconsole.warn(\"BCX: Hidden message no Dictionary\", data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { type, message } = data.Dictionary;\n\t\t\t\tif (typeof type === \"string\") {\n\t\t\t\t\tconst handler = hiddenMessageHandlers.get(type as keyof BCX_messages);\n\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\tconsole.warn(\"BCX: Hidden message no handler\", data.Sender, type, message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandler(data.Sender, message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn next(args);\n\t\t});\n\n\t\thookFunction(\"ServerAccountBeep\", 10, (args, next) => {\n\t\t\tconst data = args[0];\n\n\t\t\tif (typeof data?.BeepType === \"string\" && [\"Leash\", \"BCX\"].includes(data.BeepType) && isObject(data.Message?.BCX)) {\n\t\t\t\tconst { type, message } = data.Message.BCX;\n\t\t\t\tif (typeof type === \"string\") {\n\t\t\t\t\tconst handler = hiddenBeepHandlers.get(type as keyof BCX_beeps);\n\t\t\t\t\tif (handler === undefined) {\n\t\t\t\t\t\tconsole.warn(\"BCX: Hidden beep no handler\", data.MemberNumber, type, message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandler(data.MemberNumber, message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\treturn next(args);\n\t\t\t}\n\t\t});\n\t}\n\n\tunload() {\n\t\thiddenBeepHandlers.clear();\n\t\thiddenMessageHandlers.clear();\n\t}\n}\n","import { VERSION } from \"./config\";\nimport { AccessLevel, getPermissionDataFromBundle, getPlayerPermissionSettings, PermissionData, setPermissionMinAccess, setPermissionSelfAccess } from \"./modules/authority\";\nimport { sendQuery } from \"./modules/messaging\";\nimport { isObject } from \"./utils\";\n\nexport class ChatroomCharacter {\n\tisPlayer(): this is PlayerCharacter {\n\t\treturn false;\n\t}\n\n\tBCXVersion: string | null = null;\n\tCharacter: Character;\n\n\tget MemberNumber(): number {\n\t\tif (typeof this.Character.MemberNumber !== \"number\") {\n\t\t\tthrow new Error(\"Character without MemberNumber\");\n\t\t}\n\t\treturn this.Character.MemberNumber;\n\t}\n\n\tget Name(): string {\n\t\treturn this.Character.Name;\n\t}\n\n\ttoString(): string {\n\t\treturn `${this.Name} (${this.MemberNumber})`;\n\t}\n\n\tconstructor(character: Character) {\n\t\tthis.Character = character;\n\t\tif (character.ID === 0) {\n\t\t\tthis.BCXVersion = VERSION;\n\t\t}\n\t\tconsole.debug(`BCX: Loaded character ${character.Name} (${character.MemberNumber})`);\n\t}\n\n\tgetPermissions(): Promise<PermissionData> {\n\t\treturn sendQuery(\"permissions\", undefined, this.MemberNumber).then(data => {\n\t\t\tif (!isObject(data) ||\n\t\t\t\tObject.values(data).some(v =>\n\t\t\t\t\t!Array.isArray(v) ||\n\t\t\t\t\ttypeof v[0] !== \"boolean\" ||\n\t\t\t\t\ttypeof v[1] !== \"number\" ||\n\t\t\t\t\tAccessLevel[v[1]] === undefined\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tthrow new Error(\"Bad data\");\n\t\t\t}\n\n\t\t\treturn getPermissionDataFromBundle(data);\n\t\t});\n\t}\n\n\tgetMyAccessLevel(): Promise<AccessLevel> {\n\t\treturn sendQuery(\"myAccessLevel\", undefined, this.MemberNumber).then(data => {\n\t\t\tif (typeof data !== \"number\" || AccessLevel[data] === undefined) {\n\t\t\t\tthrow new Error(\"Bad data\");\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t}\n\n\tsetPermission(permission: BCX_Permissions, type: \"self\", target: boolean): Promise<boolean>\n\tsetPermission(permission: BCX_Permissions, type: \"min\", target: AccessLevel): Promise<boolean>\n\tsetPermission(permission: BCX_Permissions, type: \"self\" | \"min\", target: boolean | AccessLevel): Promise<boolean> {\n\t\treturn sendQuery(\"editPermission\", {\n\t\t\tpermission,\n\t\t\tedit: type,\n\t\t\ttarget\n\t\t}, this.MemberNumber).then(data => {\n\t\t\tif (typeof data !== \"boolean\") {\n\t\t\t\tthrow new Error(\"Bad data\");\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t}\n}\n\nexport class PlayerCharacter extends ChatroomCharacter {\n\t/** HACK: Otherwise TS wrongly assumes PlayerCharacter to be identical to ChatroomCharacter */\n\tpublic readonly playerObject = true;\n\n\toverride isPlayer(): this is PlayerCharacter {\n\t\treturn true;\n\t}\n\n\toverride getPermissions(): Promise<PermissionData> {\n\t\treturn Promise.resolve(getPlayerPermissionSettings());\n\t}\n\n\toverride getMyAccessLevel(): Promise<AccessLevel.self> {\n\t\treturn Promise.resolve(AccessLevel.self);\n\t}\n\n\toverride setPermission(permission: BCX_Permissions, type: \"self\", target: boolean): Promise<boolean>\n\toverride setPermission(permission: BCX_Permissions, type: \"min\", target: AccessLevel): Promise<boolean>\n\toverride setPermission(permission: BCX_Permissions, type: \"self\" | \"min\", target: boolean | AccessLevel): Promise<boolean> {\n\t\tif (type === \"self\") {\n\t\t\tif (typeof target !== \"boolean\") {\n\t\t\t\tthrow new Error(\"Invalid target value for self permission edit\");\n\t\t\t}\n\t\t\treturn Promise.resolve(setPermissionSelfAccess(permission, target, this));\n\t\t} else {\n\t\t\tif (typeof target !== \"number\") {\n\t\t\t\tthrow new Error(\"Invalid target value for min permission edit\");\n\t\t\t}\n\t\t\treturn Promise.resolve(setPermissionMinAccess(permission, target, this));\n\t\t}\n\t}\n}\n\nconst currentRoomCharacters: ChatroomCharacter[] = [];\n\nfunction cleanOldCharacters(): void {\n\tfor(let i = currentRoomCharacters.length - 1; i >= 0; i--) {\n\t\tif (!currentRoomCharacters[i].isPlayer() && !ChatRoomCharacter.includes(currentRoomCharacters[i].Character)) {\n\t\t\tcurrentRoomCharacters.splice(i, 1);\n\t\t}\n\t}\n}\n\nexport function getChatroomCharacter(memberNumber: number): ChatroomCharacter | null {\n\tif (typeof memberNumber !== \"number\")\n\t\treturn null;\n\tcleanOldCharacters();\n\tlet character = currentRoomCharacters.find(c => c.Character.MemberNumber === memberNumber);\n\tif (!character) {\n\t\tif (Player.MemberNumber === memberNumber) {\n\t\t\tcharacter = new PlayerCharacter(Player);\n\t\t} else {\n\t\t\tconst BCCharacter = ChatRoomCharacter.find(c => c.MemberNumber === memberNumber);\n\t\t\tif (!BCCharacter) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tcharacter = new ChatroomCharacter(BCCharacter);\n\t\t}\n\t\tcurrentRoomCharacters.push(character);\n\t}\n\treturn character;\n}\n\nexport function getAllCharactersInRoom(): ChatroomCharacter[] {\n\treturn ChatRoomCharacter.map(c => getChatroomCharacter(c.MemberNumber!)).filter(Boolean) as ChatroomCharacter[];\n}\n\nexport function getPlayerCharacter(): PlayerCharacter {\n\tlet character = currentRoomCharacters.find(c => c.Character === Player) as PlayerCharacter | undefined;\n\tif (!character) {\n\t\tcharacter = new PlayerCharacter(Player);\n\t\tcurrentRoomCharacters.push(character);\n\t}\n\treturn character;\n}\n","import { BaseModule } from \"../moduleManager\";\nimport { isObject } from \"../utils\";\n\nexport let modStorage: Partial<ModStorage> = {};\n\nexport function modStorageSync() {\n\tif (!Player.OnlineSettings) {\n\t\tconsole.error(\"BCX: Player OnlineSettings not defined during storage sync!\");\n\t\treturn;\n\t}\n\t(Player.OnlineSettings as any).BCX = LZString.compressToBase64(JSON.stringify(modStorage));\n\tif (typeof ServerAccountUpdate !== \"undefined\") {\n\t\tServerAccountUpdate.QueueData({ OnlineSettings: Player.OnlineSettings });\n\t} else {\n\t\tconsole.debug(\"BCX: Old sync method\");\n\t\tServerSend(\"AccountUpdate\", { OnlineSettings: Player.OnlineSettings });\n\t}\n}\n\nexport class ModuleStorage extends BaseModule {\n\tinit() {\n\t\tconst saved = (Player.OnlineSettings as any)?.BCX;\n\t\tif (typeof saved === \"string\") {\n\t\t\ttry {\n\t\t\t\tconst storage = JSON.parse(LZString.decompressFromBase64(saved)!);\n\t\t\t\tif (!isObject(storage)) {\n\t\t\t\t\tthrow new Error(\"Bad data\");\n\t\t\t\t}\n\t\t\t\tmodStorage = storage;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"BCX: Error while loading saved data, full reset.\", error);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"BCX: First time init\");\n\t\t}\n\t}\n\n\trun() {\n\t\tmodStorageSync();\n\t}\n}\n","import { BaseModule, ModuleInitPhase, moduleInitPhase } from \"../moduleManager\";\nimport { ModuleCategory } from \"../moduleManager\";\nimport { isObject } from \"../utils\";\nimport { ChatroomCharacter, getChatroomCharacter } from \"../characters\";\nimport { modStorage, modStorageSync } from \"./storage\";\nimport { notifyOfChange, queryHandlers } from \"./messaging\";\n\nexport enum AccessLevel {\n\tself = 0,\n\tclubowner = 1,\n\towner = 2, // TODO\n\tlover = 3,\n\tmistress = 4, // TODO\n\twhitelist = 5,\n\tfriend = 6,\n\tpublic = 7\n}\n\nexport interface PermissionInfo {\n\tname: string;\n\tcategory: ModuleCategory;\n\tself: boolean;\n\tmin: AccessLevel;\n}\n\nexport type PermissionData = Partial<Record<BCX_Permissions, PermissionInfo>>;\n\nconst permissions: Map<BCX_Permissions, PermissionInfo> = new Map();\n\nexport function registerPermission(name: BCX_Permissions, data: PermissionInfo) {\n\tif (moduleInitPhase !== ModuleInitPhase.init) {\n\t\tthrow new Error(\"Permissions can be registered only during init\");\n\t}\n\tif (permissions.has(name)) {\n\t\tthrow new Error(`Permission \"${name}\" already defined!`);\n\t}\n\tpermissions.set(name, data);\n}\n\nexport function getCharacterAccessLevel(character: ChatroomCharacter): AccessLevel {\n\tif (character.isPlayer()) return AccessLevel.self;\n\tif (character.MemberNumber !== null) {\n\t\tif (Player.IsOwnedByMemberNumber(character.MemberNumber)) return AccessLevel.clubowner;\n\t\tif (Player.IsLoverOfMemberNumber(character.MemberNumber)) return AccessLevel.lover;\n\t\tif (Player.WhiteList.includes(character.MemberNumber)) return AccessLevel.whitelist;\n\t\tif (Player.FriendList?.includes(character.MemberNumber)) return AccessLevel.friend;\n\t}\n\treturn AccessLevel.public;\n}\n\nexport function checkPermissionAccess(permission: BCX_Permissions, character: ChatroomCharacter): boolean {\n\tconst permData = permissions.get(permission);\n\tif (!permData) {\n\t\tconsole.error(new Error(`Check for unknown permission \"${permission}\"`));\n\t\treturn false;\n\t}\n\t// TODO: Check item access\n\treturn checkPermisionAccesData(permData, getCharacterAccessLevel(character));\n}\n\nexport function checkPermisionAccesData(permData: PermissionInfo, accessLevel: AccessLevel): boolean {\n\tif (accessLevel === AccessLevel.self) {\n\t\treturn permData.self || permData.min === AccessLevel.self;\n\t}\n\treturn accessLevel <= permData.min;\n}\n\nfunction permissionsMakeBundle(): PermissionsBundle {\n\tconst res: PermissionsBundle = {};\n\tfor (const [k, v] of permissions.entries()) {\n\t\tres[k] = [v.self, v.min];\n\t}\n\treturn res;\n}\n\nexport function getPermissionDataFromBundle(bundle: PermissionsBundle): PermissionData {\n\tconst res: PermissionData = {};\n\tfor (const [k, v] of permissions.entries()) {\n\t\tif (bundle[k]) {\n\t\t\tres[k] = {\n\t\t\t\tcategory: v.category,\n\t\t\t\tname: v.name,\n\t\t\t\tself: bundle[k][0],\n\t\t\t\tmin: bundle[k][1]\n\t\t\t};\n\t\t}\n\t}\n\n\treturn res;\n}\n\nexport function setPermissionSelfAccess(permission: BCX_Permissions, self: boolean, characterToCheck: ChatroomCharacter | null): boolean {\n\tconst permData = permissions.get(permission);\n\tif (!permData) {\n\t\tthrow new Error(`Attempt to edit unknown permission \"${permission}\"`);\n\t}\n\n\tif (permData.self === self) return true;\n\n\tif (characterToCheck) {\n\t\tif (!checkPermissionAccess(self ? \"authority_grant_self\" : \"authority_revoke_self\", characterToCheck) ||\n\t\t\t!characterToCheck.isPlayer() && !checkPermissionAccess(permission, characterToCheck)\n\t\t) {\n\t\t\tconsole.warn(`BCX: Unauthorized self permission edit attempt for \"${permission}\" by ${characterToCheck}`);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpermData.self = self || permData.min === AccessLevel.self;\n\tpermissionsSync();\n\tnotifyOfChange();\n\n\treturn true;\n}\n\nexport function setPermissionMinAccess(permission: BCX_Permissions, min: AccessLevel, characterToCheck: ChatroomCharacter | null): boolean {\n\tconst permData = permissions.get(permission);\n\tif (!permData) {\n\t\tthrow new Error(`Attempt to edit unknown permission \"${permission}\"`);\n\t}\n\n\tif (permData.min === min) return true;\n\n\tif (characterToCheck) {\n\t\tconst allowed =\n\t\t// Exception: Player can always lower permissions \"Self\"->\"Owner\"\n\t\t(characterToCheck.isPlayer() && permData.min < min && min <= AccessLevel.owner) ||\n\t\t(\n\t\t\t// Character must have access to \"allow minimal access modification\"\n\t\t\tcheckPermissionAccess(\"authority_edit_min\", characterToCheck) &&\n\t\t\t(\n\t\t\t\t// Character must have access to target rule\n\t\t\t\tcheckPermissionAccess(permission, characterToCheck) ||\n\t\t\t\t// Exception: Player bypasses this check when lowering \"minimal access\"\n\t\t\t\tcharacterToCheck.isPlayer() && min >= permData.min\n\t\t\t) &&\n\t\t\t(\n\t\t\t\t// Not player must have access to target level\n\t\t\t\t!characterToCheck.isPlayer() ||\n\t\t\t\tgetCharacterAccessLevel(characterToCheck) <= min\n\t\t\t)\n\t\t);\n\t\tif (!allowed) {\n\t\t\tconsole.warn(`BCX: Unauthorized min permission edit attempt for \"${permission}\" by ${characterToCheck}`);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpermData.min = min;\n\tif (min === AccessLevel.self) {\n\t\tpermData.self = true;\n\t}\n\tpermissionsSync();\n\tnotifyOfChange();\n\n\treturn true;\n}\n\nfunction permissionsSync() {\n\tmodStorage.permissions = permissionsMakeBundle();\n\tmodStorageSync();\n}\n\nexport function getPlayerPermissionSettings(): PermissionData {\n\tconst res: PermissionData = {};\n\tfor (const [k, v] of permissions.entries()) {\n\t\tres[k] = {...v};\n\t}\n\treturn res;\n}\n\nexport class ModuleAuthority extends BaseModule {\n\tinit() {\n\t\tregisterPermission(\"authority_grant_self\", {\n\t\t\tname: \"Allow granting self access\",\n\t\t\tcategory: ModuleCategory.Authority,\n\t\t\tself: true,\n\t\t\tmin: AccessLevel.self\n\t\t});\n\t\tregisterPermission(\"authority_revoke_self\", {\n\t\t\tname: \"Allow forbidding self access\",\n\t\t\tcategory: ModuleCategory.Authority,\n\t\t\tself: true,\n\t\t\tmin: AccessLevel.self\n\t\t});\n\t\tregisterPermission(\"authority_edit_min\", {\n\t\t\tname: \"Allow minimal access modification\",\n\t\t\tcategory: ModuleCategory.Authority,\n\t\t\tself: true,\n\t\t\tmin: AccessLevel.self\n\t\t});\n\n\t\tqueryHandlers.permissions = (sender, resolve) => {\n\t\t\tresolve(true, permissionsMakeBundle());\n\t\t};\n\t\tqueryHandlers.myAccessLevel = (sender, resolve) => {\n\t\t\tconst character = getChatroomCharacter(sender);\n\t\t\tif (character) {\n\t\t\t\tresolve(true, getCharacterAccessLevel(character));\n\t\t\t} else {\n\t\t\t\tresolve(false);\n\t\t\t}\n\t\t};\n\t\tqueryHandlers.editPermission = (sender, resolve, data) => {\n\t\t\tif (!isObject(data) ||\n\t\t\t\ttypeof data.permission !== \"string\" ||\n\t\t\t\t(data.edit !== \"min\" && data.edit !== \"self\") ||\n\t\t\t\t(data.edit === \"min\" && typeof data.target !== \"number\") ||\n\t\t\t\t(data.edit === \"self\" && typeof data.target !== \"boolean\")\n\t\t\t) {\n\t\t\t\tconsole.warn(`BCX: Bad editPermission query from ${sender}`, data);\n\t\t\t\treturn resolve(false);\n\t\t\t}\n\n\t\t\tconst character = getChatroomCharacter(sender);\n\t\t\tif (!character) {\n\t\t\t\tconsole.warn(`BCX: editPermission query from ${sender}; not found in room`, data);\n\t\t\t\treturn resolve(false);\n\t\t\t}\n\n\t\t\tif (!permissions.has(data.permission)) {\n\t\t\t\tconsole.warn(`BCX: editPermission query from ${sender}; unknown permission`, data);\n\t\t\t\treturn resolve(false);\n\t\t\t}\n\n\t\t\tif (data.edit === \"self\") {\n\t\t\t\tif (typeof data.target !== \"boolean\") {\n\t\t\t\t\tthrow new Error(\"Assertion failed\");\n\t\t\t\t}\n\t\t\t\treturn resolve(true, setPermissionSelfAccess(data.permission, data.target, character));\n\t\t\t} else {\n\t\t\t\tif (typeof data.target !== \"number\") {\n\t\t\t\t\tthrow new Error(\"Assertion failed\");\n\t\t\t\t}\n\t\t\t\tif (AccessLevel[data.target] === undefined) {\n\t\t\t\t\tconsole.warn(`BCX: editPermission query from ${sender}; unknown access level`, data);\n\t\t\t\t\treturn resolve(true, false);\n\t\t\t\t}\n\t\t\t\treturn resolve(true, setPermissionMinAccess(data.permission, data.target, character));\n\t\t\t}\n\t\t};\n\t}\n\n\tload() {\n\t\tif (isObject(modStorage.permissions)) {\n\t\t\tfor (const [k, v] of Object.entries(modStorage.permissions)) {\n\t\t\t\tconst perm = permissions.get(k as BCX_Permissions);\n\t\t\t\tif (!Array.isArray(v) || typeof v[0] !== \"boolean\" || typeof v[1] !== \"number\") {\n\t\t\t\t\tconsole.warn(`BCX: Storage: bad permission ${k}`);\n\t\t\t\t} else if (AccessLevel[v[1]] === undefined) {\n\t\t\t\t\tconsole.warn(`BCX: Storage: bad permission ${k} level ${v[1]}`);\n\t\t\t\t} else if (perm === undefined) {\n\t\t\t\t\tconsole.warn(`BCX: Storage: unknown permission ${k}`);\n\t\t\t\t} else {\n\t\t\t\t\tperm.self = v[0];\n\t\t\t\t\tperm.min = v[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmodStorage.permissions = permissionsMakeBundle();\n\t}\n}\n","export const icon_Emote = `data:image/png;base64,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`;\n\nexport const icon_Typing = `data:image/png;base64,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`;\n\nexport const icon_NewMessage = `data:image/png;base64,\niVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABGdBTUEAALGOfPtRkwAAACBjSFJN\nAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAADpElEQVR42uyZP0grWRTGz+gk\nyhPEXYSQQmTAJoWCqJ2VqAgmYhBFtxELURHfW7ERbATTprEIJmAEWcbONBKf+KcRG7HQoGEW0ZhC\ngwmmEGIiZvy2eXlkvE40muhG5oMUmTn3nvO75947d85wAOgrqIi+iDQQDUQD0UA0EA3kPeLD4TA5\nnc7voihOSpL0BxHJhZIEQRDuOjs7F8fHx220sLDwg4hQyL/p6Wk7NTU1/ZvJiOO4Tw/0pRiqq6uD\nHM/zN8lk8k8iIqPRSKFQSJE/q9VKExMTVFJSQvF4nMkvAOI47sV5kDqcZrJN7wsAlZaWkizL5HK5\nSBRFha0gCBQMBunx8ZGIKEo8z9+kyNbW1uB0OhnikZERXF5e4qMVDocxOTnJZMRut2N/fz/92o0C\nZGdnBwCwu7sLk8mkaFxZWQmPx/NhEOvr66iqqlLEIAgCNjc3AQB+v18dZGtrSzEaY2NjTHZmZ2cR\nj8fzBnB/fw+bzcb4HRwcxNXV1W+7k5MTdZDt7W2mY5fLxXTa0dEBSZJyDnF+fg6r1cr4m5+fhyzL\nCtusQQDA5/PBYrEoOi8vL4fD4cDd3V1OsuB2u2EwGBQ+WltbcXBw8Gyb4+Pj7EEAIJFIwG63M6PV\n39+PUCj0ZohIJIKhoSGm37m5OcRiMdV2GTOSvkbUtLGxAaPRqHBaU1OTcRDUtLe3h9raWkVfFRUV\n8Hq9L7Z909R6qmAwiL6+PmYUbTZbxlF8KbsWiwWnp6eviiEnIKl5vbKywszrlpYW+Hw+1XaSJMFs\nNjNZcLvdWe2GDEhxcfGbQFLy+/1obm5WBMbzPBYXFxU7jSzLEEURZWVlCtuGhgYcHh5m7ffda+Q5\n3d7eYmZm5tm9//r6GtFoFKOjo8z9qakpRKPRN/nM2dR6Tl6vl3ka19fXo7GxkTklrK6uvstXXkEA\nIBAIYGBgQPWk2t3d/eoF/akgAJBMJrG0tAS9Xq+AcDgceHh4yImPvKwRNR0dHcFsNqOtrU31CZ0r\nED69iP2a94psVFdXRx6PhwCQTqfL7zt7roNnHPD8x1dRCvkTgwIk39nJK8iX+dCTnoVCzgj/qwpB\nREQXFxcUCAQokUgwVY+n1ZLU/6cZVbN/TeUl3Wem9jqdjs7OzpQXTSbTRaEX6AwGw2VRb2/vP4W+\nPrq6urb5np6euUgk8m15efmvWCxWQkSPBRI/p9fr5fb29p/Dw8N/c9rnaQ1EA9FANBANRAPRQP5/\n+m8A4sEE5SZccHcAAAAASUVORK5CYII=`.replaceAll(\"\\n\", \"\");\n\nexport const icon_PurpleHeart = `data:image/png;base64,\n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`.replaceAll(\"\\n\", \"\");\n\nexport const icon_BCX = `data:image/png;base64,\n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\n`.replaceAll(\"\\n\", \"\");\n\nexport const icon_OwnerList = `data:image/png;base64,\n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\nxBaQJfz/AJiiFen2ESExAAAAAElFTkSuQmCC\n`.replaceAll(\"\\n\", \"\");\n","import { detectOtherMods, DrawImageEx } from \"../utilsClub\";\nimport { VERSION } from \"../config\";\nimport { hiddenMessageHandlers, sendHiddenMessage } from \"./messaging\";\nimport { BaseModule } from \"../moduleManager\";\nimport { hookFunction, patchFunction } from \"../patching\";\nimport { icon_Emote, icon_PurpleHeart, icon_Typing } from \"../resources\";\nimport { getChatroomCharacter } from \"../characters\";\n\nclass ChatRoomStatusManager {\n\tInputTimeoutMs = 3_000;\n\n\tStatusTypes = {\n\t\tNone: \"None\",\n\t\tTyping: \"Typing\",\n\t\tEmote: \"Emote\",\n\t\tWhisper: \"Whisper\",\n\t\t// NMod\n\t\tAction: \"Action\",\n\t\tAfk: 'Afk'\n\t};\n\n\tprivate InputElement: HTMLTextAreaElement | null = null;\n\n\tprivate InputTimeout: number | null = null;\n\n\tStatus: string;\n\n\tconstructor() {\n\t\tthis.Status = this.StatusTypes.None;\n\t}\n\n\tSetInputElement(elem: HTMLTextAreaElement | null) {\n\t\tif (this.InputElement !== elem) {\n\t\t\tthis.InputElement = elem;\n\t\t\tif (elem !== null) {\n\t\t\t\telem.addEventListener(\"blur\", this.InputEnd.bind(this));\n\t\t\t\telem.addEventListener(\"input\", this.InputChange.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\tSetStatus(type: string, target: number | null = null) {\n\t\tif (type !== this.Status) {\n\t\t\tif (target !== null && this.Status === this.StatusTypes.Whisper) {\n\t\t\t\tthis.SetStatus(this.StatusTypes.None, null);\n\t\t\t}\n\t\t\tthis.Status = type;\n\t\t\tsendHiddenMessage(\"ChatRoomStatusEvent\", { Type: type, Target: target }, target);\n\t\t\tconst { NMod } = detectOtherMods();\n\t\t\tif (NMod) ServerSend(\"ChatRoomStatusEvent\", { Type: type, Target: target });\n\t\t}\n\t}\n\n\tInputChange() {\n\t\tconst value = this.InputElement?.value;\n\t\tif (typeof value === \"string\" && value.length > 1) {\n\t\t\tlet type = this.StatusTypes.Typing;\n\t\t\tlet target = null;\n\t\t\tif (value.startsWith(\"*\") || value.startsWith(\"/me \") || value.startsWith(\"/emote \") || value.startsWith(\"/action \")) {\n\t\t\t\ttype = this.StatusTypes.Emote;\n\t\t\t} else if (value.startsWith(\"/\") || value.startsWith(\".\")) {\n\t\t\t\treturn this.InputEnd();\n\t\t\t} else if (ChatRoomTargetMemberNumber !== null) {\n\t\t\t\ttype = this.StatusTypes.Whisper;\n\t\t\t\ttarget = ChatRoomTargetMemberNumber;\n\t\t\t}\n\t\t\tif (this.InputTimeout !== null) {\n\t\t\t\tclearTimeout(this.InputTimeout);\n\t\t\t}\n\t\t\tthis.InputTimeout = setTimeout(this.InputEnd.bind(this), this.InputTimeoutMs);\n\t\t\tthis.SetStatus(type, target);\n\t\t} else {\n\t\t\tthis.InputEnd();\n\t\t}\n\t}\n\n\tInputEnd() {\n\t\tif (this.InputTimeout !== null) {\n\t\t\tclearTimeout(this.InputTimeout);\n\t\t\tthis.InputTimeout = null;\n\t\t}\n\t\tthis.SetStatus(this.StatusTypes.None);\n\t}\n\n\tunload() {\n\t\tthis.InputEnd();\n\t}\n}\n\nexport let ChatroomSM: ChatRoomStatusManager;\n\nfunction queryAnnounce() {\n\tannounceSelf(true);\n}\n\nexport class ModuleChatroom extends BaseModule {\n\tinit() {\n\t\tChatroomSM = new ChatRoomStatusManager();\n\t}\n\n\tprivate o_ChatRoomSM: any | null = null;\n\n\tload() {\n\t\thiddenMessageHandlers.set(\"hello\", (sender, message: any) => {\n\t\t\tconst char = getChatroomCharacter(sender);\n\t\t\tif (!char) {\n\t\t\t\tconsole.warn(`BCX: Hello from character not found in room`, sender);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof message?.version !== \"string\") {\n\t\t\t\tconsole.warn(`BCX: Invalid hello`, sender, message);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (char.BCXVersion !== message.version) {\n\t\t\t\tconsole.log(`BCX: ${char.Character.Name} (${char.Character.MemberNumber}) uses BCX version ${message.version}`);\n\t\t\t}\n\t\t\tchar.BCXVersion = message.version;\n\t\t\tif (message.request === true) {\n\t\t\t\tannounceSelf(false);\n\t\t\t}\n\t\t});\n\n\t\thiddenMessageHandlers.set(\"goodbye\", (sender) => {\n\t\t\tconst char = getChatroomCharacter(sender);\n\t\t\tif (char) {\n\t\t\t\tchar.BCXVersion = null;\n\t\t\t}\n\t\t});\n\n\t\thookFunction(\"ChatRoomMessage\", 10, (args, next) => {\n\t\t\tconst data = args[0];\n\n\t\t\tif (data?.Type === \"Action\" && data.Content === \"ServerEnter\") {\n\t\t\t\tannounceSelf(false);\n\t\t\t}\n\n\t\t\treturn next(args);\n\t\t});\n\n\t\tconst { NMod } = detectOtherMods();\n\n\t\tif (NMod) {\n\t\t\thookFunction(\"ChatRoomDrawFriendList\", 0, (args, next) => {\n\t\t\t\tconst [C, Zoom, CharX, CharY] = args as [Character, number, number, number];\n\t\t\t\tconst Char = getChatroomCharacter(C.MemberNumber!);\n\t\t\t\tconst Friend = (Player.FriendList ?? []).includes(C.MemberNumber!);\n\t\t\t\tif (Char?.BCXVersion) {\n\t\t\t\t\tDrawImageEx(icon_PurpleHeart, CharX + 375 * Zoom, CharY, {\n\t\t\t\t\t\tWidth: 50 * Zoom,\n\t\t\t\t\t\tHeight: 50 * Zoom,\n\t\t\t\t\t\tAlpha: C.ID === 0 || Friend ? 1 : 0.5\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tnext(args);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tpatchFunction(\"ChatRoomDrawCharacterOverlay\", {\n\t\t\t\t'DrawImageResize(\"Icons/Small/FriendList.png\", CharX + 375 * Zoom, CharY, 50 * Zoom, 50 * Zoom);': \"\"\n\t\t\t});\n\n\t\t\thookFunction(\"ChatRoomDrawCharacterOverlay\", 0, (args, next) => {\n\t\t\t\tnext(args);\n\n\t\t\t\tconst [C, CharX, CharY, Zoom] = args as [Character, number, number, number];\n\t\t\t\tconst Char = getChatroomCharacter(C.MemberNumber!);\n\t\t\t\tconst Friend = (Player.FriendList ?? []).includes(C.MemberNumber!);\n\t\t\t\tif (Char?.BCXVersion) {\n\t\t\t\t\tDrawImageEx(icon_PurpleHeart, CharX + 375 * Zoom, CharY, {\n\t\t\t\t\t\tWidth: 50 * Zoom,\n\t\t\t\t\t\tHeight: 50 * Zoom,\n\t\t\t\t\t\tAlpha: C.ID === 0 || Friend ? 1 : 0.5\n\t\t\t\t\t});\n\t\t\t\t} else if (Friend) {\n\t\t\t\t\tDrawImageEx(\"Icons/Small/FriendList.png\", CharX + 375 * Zoom, CharY, {\n\t\t\t\t\t\tWidth: 50 * Zoom,\n\t\t\t\t\t\tHeight: 50 * Zoom\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tswitch (C.ID === 0 ? ChatroomSM.Status : C.Status) {\n\t\t\t\t\tcase ChatroomSM.StatusTypes.Typing:\n\t\t\t\t\t\tDrawImageEx(icon_Typing, CharX + 375 * Zoom, CharY + 50 * Zoom, {\n\t\t\t\t\t\t\tWidth: 50 * Zoom,\n\t\t\t\t\t\t\tHeight: 50 * Zoom\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ChatroomSM.StatusTypes.Whisper:\n\t\t\t\t\t\tDrawImageEx(icon_Typing, CharX + 375 * Zoom, CharY + 50 * Zoom, {\n\t\t\t\t\t\t\tWidth: 50 * Zoom,\n\t\t\t\t\t\t\tHeight: 50 * Zoom,\n\t\t\t\t\t\t\tAlpha: 0.5\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ChatroomSM.StatusTypes.Emote:\n\t\t\t\t\t\tDrawImageEx(icon_Emote, CharX + 375 * Zoom, CharY + 50 * Zoom, {\n\t\t\t\t\t\t\tWidth: 50 * Zoom,\n\t\t\t\t\t\t\tHeight: 50 * Zoom\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thookFunction(\"ChatRoomCreateElement\", 0, (args, next) => {\n\t\t\t\tnext(args);\n\t\t\t\tChatroomSM.SetInputElement(document.getElementById(\"InputChat\") as HTMLTextAreaElement);\n\t\t\t});\n\t\t}\n\n\t\thookFunction(\"ChatRoomSendChat\", 0, (args, next) => {\n\t\t\tnext(args);\n\t\t\tChatroomSM.InputEnd();\n\t\t});\n\n\t\thookFunction(\"ChatRoomClearAllElements\", 0, (args, next) => {\n\t\t\tnext(args);\n\t\t\tChatroomSM.SetInputElement(null);\n\t\t});\n\n\t\thiddenMessageHandlers.set(\"ChatRoomStatusEvent\", (src, data: any) => {\n\t\t\tfor (const char of ChatRoomCharacter) {\n\t\t\t\tif (char.MemberNumber === src) {\n\t\t\t\t\tchar.Status = data.Target == null || data.Target === Player.MemberNumber ? data.Type : \"None\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (NMod) {\n\t\t\tthis.o_ChatRoomSM = (window as any).ChatRoomSM;\n\t\t\t(window as any).ChatRoomSM = ChatroomSM;\n\t\t\tServerSocket.on(\"ChatRoomMessageSync\", queryAnnounce);\n\t\t}\n\t}\n\n\trun() {\n\t\tif (document.getElementById(\"InputChat\") != null) {\n\t\t\tChatroomSM.SetInputElement(document.getElementById(\"InputChat\") as HTMLTextAreaElement);\n\t\t}\n\t\tqueryAnnounce();\n\t}\n\n\tunload() {\n\t\tChatroomSM.unload();\n\t\tif (this.o_ChatRoomSM) {\n\t\t\t(window as any).ChatRoomSM = this.o_ChatRoomSM;\n\t\t}\n\t\tServerSocket.off(\"ChatRoomMessageSync\", queryAnnounce);\n\t\tsendHiddenMessage(\"goodbye\", undefined);\n\t}\n}\n\nexport function announceSelf(request: boolean = false) {\n\tsendHiddenMessage(\"hello\", {\n\t\tversion: VERSION,\n\t\trequest\n\t});\n}\n","import { detectOtherMods, isBind, isCloth } from \"../utilsClub\";\nimport { allowMode } from \"./console\";\nimport { BaseModule } from \"../moduleManager\";\nimport { hookFunction } from \"../patching\";\nimport { clipboardAvailable } from \"../utils\";\n\nexport function j_WardrobeExportSelectionClothes(includeBinds: boolean = false): string {\n\tif (!CharacterAppearanceSelection) return \"\";\n\tconst save = CharacterAppearanceSelection.Appearance\n\t\t.filter(a => isCloth(a, true) || (includeBinds && isBind(a)))\n\t\t.map(WardrobeAssetBundle);\n\treturn LZString.compressToBase64(JSON.stringify(save));\n}\n\nexport function j_WardrobeImportSelectionClothes(data: string | ItemBundle[], includeBinds: boolean, force: boolean = false): string | true {\n\tif (typeof data !== \"string\" || data.length < 1) return \"No data\";\n\ttry {\n\t\tif (data[0] !== \"[\") {\n\t\t\tconst decompressed = LZString.decompressFromBase64(data);\n\t\t\tif (!decompressed) return \"Bad data\";\n\t\t\tdata = decompressed;\n\t\t}\n\t\tdata = JSON.parse(data) as ItemBundle[];\n\t\tif (!Array.isArray(data)) return \"Bad data\";\n\t} catch (error) {\n\t\tconsole.warn(error);\n\t\treturn \"Bad data\";\n\t}\n\tconst C = CharacterAppearanceSelection;\n\tif (!C) {\n\t\treturn \"No character\";\n\t}\n\n\tif (includeBinds && !force && C.Appearance.some(a => isBind(a) && a.Property?.Effect?.includes(\"Lock\"))) {\n\t\treturn \"Character is bound\";\n\t}\n\n\tconst Allow = (a: Item | Asset) => isCloth(a, CharacterAppearanceSelection!.ID === 0) || (includeBinds && isBind(a));\n\n\tC.Appearance = C.Appearance.filter(a => !Allow(a));\n\tfor (const cloth of data) {\n\t\tif (C.Appearance.some(a => a.Asset.Group.Name === cloth.Group)) continue;\n\t\tconst A = Asset.find(a => a.Group.Name === cloth.Group && a.Name === cloth.Name && Allow(a));\n\t\tif (A != null) {\n\t\t\tCharacterAppearanceSetItem(C, cloth.Group, A, cloth.Color, 0, undefined, false);\n\t\t\tconst item = InventoryGet(C, cloth.Group);\n\t\t\tif (cloth.Property && item) {\n\t\t\t\tif (item.Property == null) item.Property = {};\n\t\t\t\tObject.assign(item.Property, cloth.Property);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(`Clothing not found: `, cloth);\n\t\t}\n\t}\n\tCharacterRefresh(C);\n\treturn true;\n}\n\nlet j_WardrobeIncludeBinds = false;\n\nfunction PasteListener(ev: ClipboardEvent) {\n\tif (CurrentScreen === \"Appearance\" && CharacterAppearanceMode === \"Wardrobe\") {\n\t\tev.preventDefault();\n\t\tev.stopImmediatePropagation();\n\t\tconst data = (ev.clipboardData || (window as any).clipboardData).getData(\"text\");\n\t\tconst res = j_WardrobeImportSelectionClothes(data, j_WardrobeIncludeBinds, allowMode);\n\t\tCharacterAppearanceWardrobeText = res !== true ? `Import error: ${res}` : \"Imported!\";\n\t}\n}\n\nexport class ModuleWardrobe extends BaseModule {\n\n\tload() {\n\t\tconst { NMod } = detectOtherMods();\n\n\t\thookFunction(\"AppearanceRun\", 0, (args, next) => {\n\t\t\tnext(args);\n\t\t\tif ((CharacterAppearanceMode === \"Wardrobe\" || NMod && AppearanceMode === \"Wardrobe\") && clipboardAvailable) {\n\t\t\t\tconst Y = NMod ? 265 : 125;\n\t\t\t\tDrawButton(1457, Y, 50, 50, \"\", \"White\", j_WardrobeIncludeBinds ? \"Icons/Checked.png\" : \"\", \"Include restraints\");\n\t\t\t\tDrawButton(1534, Y, 207, 50, \"Export\", \"White\", \"\");\n\t\t\t\tDrawButton(1768, Y, 207, 50, \"Import\", \"White\", \"\");\n\t\t\t}\n\t\t});\n\n\t\thookFunction(\"AppearanceClick\", 0, (args, next) => {\n\t\t\tif ((CharacterAppearanceMode === \"Wardrobe\" || NMod && AppearanceMode === \"Wardrobe\") && clipboardAvailable) {\n\t\t\t\tconst Y = NMod ? 265 : 125;\n\t\t\t\t// Restraints toggle\n\t\t\t\tif (MouseIn(1457, Y, 50, 50)) {\n\t\t\t\t\tj_WardrobeIncludeBinds = !j_WardrobeIncludeBinds;\n\t\t\t\t}\n\t\t\t\t// Export\n\t\t\t\tif (MouseIn(1534, Y, 207, 50)) {\n\t\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\t\tawait navigator.clipboard.writeText(j_WardrobeExportSelectionClothes(j_WardrobeIncludeBinds));\n\t\t\t\t\t\tCharacterAppearanceWardrobeText = \"Copied to clipboard!\";\n\t\t\t\t\t}, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Import\n\t\t\t\tif (MouseIn(1768, Y, 207, 50)) {\n\t\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\t\tif (typeof navigator.clipboard.readText !== \"function\") {\n\t\t\t\t\t\t\tCharacterAppearanceWardrobeText = \"Please press Ctrl+V\";\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst data = await navigator.clipboard.readText();\n\t\t\t\t\t\tconst res = j_WardrobeImportSelectionClothes(data, j_WardrobeIncludeBinds, allowMode);\n\t\t\t\t\t\tCharacterAppearanceWardrobeText = res !== true ? `Import error: ${res}` : \"Imported!\";\n\t\t\t\t\t}, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext(args);\n\t\t});\n\n\t\tdocument.addEventListener(\"paste\", PasteListener);\n\t}\n\n\tunload() {\n\t\tdocument.removeEventListener(\"paste\", PasteListener);\n\t}\n}\n","import { detectOtherMods } from \"../utilsClub\";\nimport { hookFunction, patchFunction } from \"../patching\";\nimport { j_WardrobeExportSelectionClothes, j_WardrobeImportSelectionClothes } from \"./wardrobe\";\nimport { InvisibilityEarbuds } from \"./clubUtils\";\nimport { BaseModule } from \"../moduleManager\";\nimport { unload } from \"../main\";\nimport { modStorage } from \"./storage\";\n\nexport let allowMode: boolean = false;\nexport let developmentMode: boolean = false;\nexport let antigarble = 0;\n\nclass ConsoleInterface {\n\tget isAllow(): boolean {\n\t\treturn allowMode;\n\t}\n\n\tAllowCheats(allow?: boolean) {\n\t\tif (typeof allow !== \"boolean\" && allow !== undefined) {\n\t\t\treturn false;\n\t\t}\n\t\tif (allowMode === allow)\n\t\t\treturn true;\n\t\tif (allow === undefined) {\n\t\t\tallow = !allowMode;\n\t\t}\n\t\tallowMode = allow;\n\t\tif (allow) {\n\t\t\tconsole.warn(\"Cheats enabled; please be careful not to break things\");\n\t\t} else {\n\t\t\tthis.Devel(false);\n\t\t\tconsole.info(\"Cheats disabled\");\n\t\t}\n\t\treturn true;\n\t}\n\n\tget isDevel(): boolean {\n\t\treturn developmentMode;\n\t}\n\n\tDevel(devel?: boolean) {\n\t\tif (typeof devel !== \"boolean\" && devel !== undefined) {\n\t\t\treturn false;\n\t\t}\n\t\tif (developmentMode === devel)\n\t\t\treturn true;\n\t\tif (devel === undefined) {\n\t\t\tdevel = !developmentMode;\n\t\t}\n\t\tif (devel) {\n\t\t\tif (!this.AllowCheats(true)) {\n\t\t\t\tconsole.info(\"To use developer mode, cheats must be enabled first!\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tAssetGroup.forEach(G => G.Description = G.Name);\n\t\t\tAsset.forEach(A => A.Description = A.Group.Name + \":\" + A.Name);\n\t\t\tBackgroundSelectionAll.forEach(B => {\n\t\t\t\tB.Description = B.Name;\n\t\t\t\tB.Low = B.Description.toLowerCase();\n\t\t\t});\n\t\t\tconsole.warn(\"Developer mode enabled\");\n\t\t} else {\n\t\t\tAssetLoadDescription(\"Female3DCG\");\n\t\t\tBackgroundSelectionAll.forEach(B => {\n\t\t\t\tB.Description = DialogFindPlayer(B.Name);\n\t\t\t\tB.Low = B.Description.toLowerCase();\n\t\t\t});\n\t\t\tconsole.info(\"Developer mode disabled\");\n\t\t}\n\t\tdevelopmentMode = devel;\n\t\treturn true;\n\t}\n\n\tget antigarble(): number {\n\t\treturn antigarble;\n\t}\n\n\tset antigarble(value: number) {\n\t\tif (![0, 1, 2].includes(value)) {\n\t\t\tthrow new Error(\"Bad antigarble value, expected 0/1/2\");\n\t\t}\n\t\tantigarble = value;\n\t}\n\n\tj_WardrobeExportSelectionClothes(includeBinds: boolean = false): string {\n\t\treturn j_WardrobeExportSelectionClothes(includeBinds);\n\t}\n\n\tj_WardrobeImportSelectionClothes(data: string | ItemBundle[], includeBinds: boolean, force: boolean = false): string | true {\n\t\treturn j_WardrobeImportSelectionClothes(data, includeBinds, force);\n\t}\n\n\tToggleInvisibilityEarbuds(): void {\n\t\treturn InvisibilityEarbuds();\n\t}\n\n\tUnload() {\n\t\treturn unload();\n\t}\n\n\tget storage(): any {\n\t\tif (!developmentMode) {\n\t\t\treturn \"Development mode required\";\n\t\t}\n\t\treturn modStorage;\n\t}\n}\n\nexport const consoleInterface: ConsoleInterface = Object.freeze(new ConsoleInterface());\n\nexport class ModuleConsole extends BaseModule {\n\tload() {\n\t\t(window as any).bcx = consoleInterface;\n\n\t\tconst { NMod } = detectOtherMods();\n\n\t\tpatchFunction(\"ChatRoomMessage\", NMod ? {\n\t\t\t\"A.DynamicDescription(Source).toLowerCase()\": `( bcx.isDevel ? A.Description : A.DynamicDescription(Source).toLowerCase() )`,\n\t\t\t\"G.Description.toLowerCase()\": `( bcx.isDevel ? G.Description : G.Description.toLowerCase() )`\n\t\t} : {\n\t\t\t\"Asset[A].DynamicDescription(SourceCharacter || Player).toLowerCase()\": `( bcx.isDevel ? Asset[A].Description : Asset[A].DynamicDescription(SourceCharacter || Player).toLowerCase() )`,\n\t\t\t\"AssetGroup[A].Description.toLowerCase()\": `( bcx.isDevel ? AssetGroup[A].Description : AssetGroup[A].Description.toLowerCase() )`\n\t\t});\n\n\t\tpatchFunction(\"ExtendedItemDraw\", {\n\t\t\t\"DialogFindPlayer(DialogPrefix + Option.Name)\": `( bcx.isDevel ? JSON.stringify(Option.Property.Type) : DialogFindPlayer(DialogPrefix + Option.Name) )`\n\t\t});\n\n\t\thookFunction(\"DialogDrawItemMenu\", 0, (args, next) => {\n\t\t\tif (developmentMode) {\n\t\t\t\tDialogTextDefault = (args[0] as Character).FocusGroup.Description;\n\t\t\t}\n\t\t\treturn next(args);\n\t\t});\n\n\t\tpatchFunction(\"DialogDrawPoseMenu\", {\n\t\t\t'\"Icons/Poses/\" + PoseGroup[P].Name + \".png\"': `\"Icons/Poses/\" + PoseGroup[P].Name + \".png\", ( bcx.isDevel ? PoseGroup[P].Name : undefined )`\n\t\t});\n\n\t\thookFunction(\"DialogDrawExpressionMenu\", 0, (args, next) => {\n\t\t\tnext(args);\n\t\t\tif (developmentMode) {\n\t\t\t\tfor (let I = 0; I < DialogFacialExpressions.length; I++) {\n\t\t\t\t\tconst FE = DialogFacialExpressions[I];\n\t\t\t\t\tconst OffsetY = 185 + 100 * I;\n\n\t\t\t\t\tif (MouseIn(20, OffsetY, 90, 90)) {\n\t\t\t\t\t\tDrawText(JSON.stringify(FE.Group), 300, 950, \"White\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (I === DialogFacialExpressionsSelected) {\n\t\t\t\t\t\tfor (let j = 0; j < FE.ExpressionList.length; j++) {\n\t\t\t\t\t\t\tconst EOffsetX = 155 + 100 * (j % 3);\n\t\t\t\t\t\t\tconst EOffsetY = 185 + 100 * Math.floor(j / 3);\n\t\t\t\t\t\t\tif (MouseIn(EOffsetX, EOffsetY, 90, 90)) {\n\t\t\t\t\t\t\t\tDrawText(JSON.stringify(FE.ExpressionList[j]), 300, 950, \"White\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tDialogSelfMenuOptions.forEach(opt => {\n\t\t\tif (opt.Name === \"Pose\") {\n\t\t\t\topt.IsAvailable = () => true;\n\t\t\t\topt.Draw = function () { return DialogDrawPoseMenu(); };\n\t\t\t} else if (opt.Name === \"Expression\") {\n\t\t\t\topt.Draw = function () { return DialogDrawExpressionMenu(); };\n\t\t\t}\n\t\t});\n\n\t\thookFunction(\"SpeechGarble\", 0, (args, next) => {\n\t\t\tif (antigarble === 2) return args[1];\n\t\t\tlet res = next(args);\n\t\t\tif (typeof res === \"string\" && res !== args[1] && antigarble === 1) res += ` <> ${args[1]}`;\n\t\t\treturn res;\n\t\t});\n\t}\n\n\tunload() {\n\t\tdelete (window as any).bcx;\n\t}\n}","import { ChatRoomActionMessage, ChatRoomSendLocal, isBind } from \"../utilsClub\";\nimport { ChatroomCharacter, getAllCharactersInRoom } from \"../characters\";\nimport { hookFunction } from \"../patching\";\nimport { consoleInterface } from \"./console\";\nimport { arrayUnique, longestCommonPrefix } from \"../utils\";\nimport { BaseModule } from \"../moduleManager\";\n\ninterface ICommandInfo {\n\tdescription: string | null;\n}\n\ntype CommandHandlerRaw = (args: string) => boolean;\ntype CommandHandlerParsed = (argv: string[]) => boolean;\ntype CommandAutocompleterRaw = (args: string) => string[];\ntype CommandAutocompleterParsed = (argv: string[]) => string[];\n\ninterface ICommandRaw extends ICommandInfo {\n\tparse: false;\n\tcallback: CommandHandlerRaw;\n\tautocomplete: CommandAutocompleterRaw | null;\n}\n\ninterface ICommandParsed extends ICommandInfo {\n\tparse: true;\n\tcallback: CommandHandlerParsed;\n\tautocomplete: CommandAutocompleterParsed | null;\n}\n\nconst commands: Map<string, ICommandRaw | ICommandParsed> = new Map();\n\nexport function registerCommand(name: string, description: string | null, callback: CommandHandlerRaw, autocomplete: CommandAutocompleterRaw | null = null) {\n\tname = name.toLocaleLowerCase();\n\tif (commands.has(name)) {\n\t\tthrow new Error(`Command \"${name}\" already registered!`);\n\t}\n\tcommands.set(name, {\n\t\tparse: false,\n\t\tcallback,\n\t\tautocomplete,\n\t\tdescription\n\t});\n}\n\nexport function aliasCommand(originalName: string, alias: string): void {\n\toriginalName = originalName.toLocaleLowerCase();\n\talias = alias.toLocaleLowerCase();\n\tconst original = commands.get(originalName);\n\tif (!original) {\n\t\tthrow new Error(`Command \"${originalName}\" to alias not found`);\n\t}\n\tif (original.parse) {\n\t\tcommands.set(alias, {\n\t\t\tparse: true,\n\t\t\tdescription: null,\n\t\t\tcallback: original.callback,\n\t\t\tautocomplete: original.autocomplete\n\t\t});\n\t} else {\n\t\tcommands.set(alias, {\n\t\t\tparse: false,\n\t\t\tdescription: null,\n\t\t\tcallback: original.callback,\n\t\t\tautocomplete: original.autocomplete\n\t\t});\n\t}\n}\n\nexport function registerCommandParsed(name: string, description: string | null, callback: CommandHandlerParsed, autocomplete: CommandAutocompleterParsed | null = null) {\n\tname = name.toLocaleLowerCase();\n\tif (commands.has(name)) {\n\t\tthrow new Error(`Command \"${name}\" already registered!`);\n\t}\n\tcommands.set(name, {\n\t\tparse: true,\n\t\tcallback,\n\t\tautocomplete,\n\t\tdescription\n\t});\n}\n\nfunction CommandParse(msg: string): [string, string] {\n\tmsg = msg.trimStart();\n\tconst commandMatch = /^(\\S+)(?:\\s|$)(.*)$/.exec(msg);\n\tif (!commandMatch) {\n\t\treturn [\"\", \"\"];\n\t}\n\treturn [(commandMatch[1] || \"\").toLocaleLowerCase(), commandMatch[2]];\n}\n\nfunction CommandParseArguments(args: string): string[] {\n\treturn [...args.matchAll(/\".*?(?:\"|$)|'.*?(?:'|$)|[^ ]+/g)]\n\t\t.map(a => a[0])\n\t\t.map(a => a[0] === '\"' || a[0] === \"'\" ? a.substring(1, a[a.length - 1] === a[0] ? a.length - 1 : a.length) : a);\n}\n\nfunction CommandHasEmptyArgument(args: string): boolean {\n\tconst argv = CommandParseArguments(args);\n\treturn argv.length === 0 || !args.endsWith(argv[argv.length - 1]);\n}\n\nfunction CommandQuoteArgument(arg: string): string {\n\tif (arg.startsWith(`\"`)) {\n\t\treturn `'${arg}'`;\n\t} else if (arg.startsWith(`'`)) {\n\t\treturn `\"${arg}\"`;\n\t} else if (arg.includes(\" \")) {\n\t\treturn arg.includes('\"') ? `'${arg}'` : `\"${arg}\"`;\n\t}\n\treturn arg;\n}\n\nfunction RunCommand(msg: string): boolean {\n\tconst [command, args] = CommandParse(msg);\n\n\tconst commandInfo = commands.get(command);\n\tif (!commandInfo) {\n\t\t// Command not found\n\t\tChatRoomSendLocal(\n\t\t\t`Unknown command \"${command}\"\\n` +\n\t\t\t`To see list of valid commands whisper '!help'`,\n\t\t\t15000\n\t\t);\n\t\treturn false;\n\t}\n\tif (commandInfo.parse) {\n\t\treturn commandInfo.callback(CommandParseArguments(args));\n\t} else {\n\t\treturn commandInfo.callback(args);\n\t}\n}\n\nfunction CommandAutocomplete(msg: string): string {\n\tmsg = msg.trimStart();\n\tconst [command, args] = CommandParse(msg);\n\n\tif (msg.length === command.length) {\n\t\tconst prefixes = Array.from(commands.entries()).filter(c => c[1].description !== null && c[0].startsWith(command)).map(c => c[0] + \" \");\n\t\tif (prefixes.length === 0)\n\t\t\treturn msg;\n\t\tconst best = longestCommonPrefix(prefixes);\n\t\tif (best === msg) {\n\t\t\tChatRoomSendLocal(prefixes.slice().sort().join(\"\\n\"), 10_000);\n\t\t}\n\t\treturn best;\n\t}\n\n\tconst commandInfo = commands.get(command);\n\tif (commandInfo && commandInfo.autocomplete) {\n\t\tif (commandInfo.parse) {\n\t\t\tconst argv = CommandParseArguments(args);\n\t\t\tif (CommandHasEmptyArgument(args)) {\n\t\t\t\targv.push(\"\");\n\t\t\t}\n\t\t\tconst lastOptions = commandInfo.autocomplete(argv);\n\t\t\tif (lastOptions.length > 0) {\n\t\t\t\tconst best = longestCommonPrefix(lastOptions);\n\t\t\t\tif (lastOptions.length > 1 && best === argv[argv.length - 1]) {\n\t\t\t\t\tChatRoomSendLocal(lastOptions.slice().sort().join(\"\\n\"), 10_000);\n\t\t\t\t}\n\t\t\t\targv[argv.length - 1] = best;\n\t\t\t}\n\t\t\treturn `${command} ` +\n\t\t\t\targv.map(CommandQuoteArgument).join(\" \") +\n\t\t\t\t(lastOptions.length === 1 ? \" \" : \"\");\n\t\t} else {\n\t\t\tconst possibleArgs = commandInfo.autocomplete(args);\n\t\t\tif (possibleArgs.length === 0) {\n\t\t\t\treturn msg;\n\t\t\t}\n\t\t\tconst best = longestCommonPrefix(possibleArgs);\n\t\t\tif (possibleArgs.length > 1 && best === args) {\n\t\t\t\tChatRoomSendLocal(possibleArgs.slice().sort().join(\"\\n\"), 10_000);\n\t\t\t}\n\t\t\treturn `${command} ${best}`;\n\t\t}\n\t}\n\n\treturn \"\";\n}\n\nexport function Command_selectCharacter(selector: string): ChatroomCharacter | string {\n\tconst characters = getAllCharactersInRoom();\n\tif (/^[0-9]+$/.test(selector)) {\n\t\tconst MemberNumber = Number.parseInt(selector, 10);\n\t\tconst target = characters.find(c => c.MemberNumber === MemberNumber);\n\t\tif (!target) {\n\t\t\treturn `Player #${MemberNumber} not found in the room.`;\n\t\t}\n\t\treturn target;\n\t}\n\tlet targets = characters.filter(c => c.Name === selector);\n\tif (targets.length === 0)\n\t\ttargets = characters.filter(c => c.Name.toLocaleLowerCase() === selector.toLocaleLowerCase());\n\n\tif (targets.length === 1) {\n\t\treturn targets[0];\n\t} else if (targets.length === 0) {\n\t\treturn `Player \"${selector}\" not found in the room.`;\n\t} else {\n\t\treturn `Multiple players match \"${selector}\". Please use Member Number instead.`;\n\t}\n}\n\nexport function Command_selectCharacterAutocomplete(selector: string): string[] {\n\tconst characters = getAllCharactersInRoom();\n\tif (/^[0-9]+$/.test(selector)) {\n\t\treturn characters.map(c => c.MemberNumber?.toString(10)).filter(n => n != null && n.startsWith(selector)) as string[];\n\t}\n\treturn characters.map(c => c.Name).filter(n => n.toLocaleLowerCase().startsWith(selector.toLocaleLowerCase()));\n}\n\nexport function Command_selectWornItem(character: ChatroomCharacter, selector: string): Item | string {\n\tconst items = character.Character.Appearance.filter(isBind);\n\tlet targets = items.filter(A => A.Asset.Group.Name.toLocaleLowerCase() === selector.toLocaleLowerCase());\n\tif (targets.length === 0)\n\t\ttargets = items.filter(A => A.Asset.Group.Description.toLocaleLowerCase() === selector.toLocaleLowerCase());\n\tif (targets.length === 0)\n\t\ttargets = items.filter(A => A.Asset.Name.toLocaleLowerCase() === selector.toLocaleLowerCase());\n\tif (targets.length === 0)\n\t\ttargets = items.filter(A => A.Asset.Description.toLocaleLowerCase() === selector.toLocaleLowerCase());\n\n\tif (targets.length === 1) {\n\t\treturn targets[0];\n\t} else if (targets.length === 0) {\n\t\treturn `Item \"${selector}\" not found on character ${character}.`;\n\t} else {\n\t\treturn `Multiple items match, please use group name instead. (eg. arms)`;\n\t}\n}\n\nexport function Command_selectWornItemAutocomplete(character: ChatroomCharacter, selector: string): string[] {\n\tconst items = character.Character.Appearance.filter(isBind);\n\n\tlet possible = arrayUnique(\n\t\titems.map(A => A.Asset.Group.Description)\n\t\t\t.concat(items.map(A => A.Asset.Description))\n\t).filter(i => i.toLocaleLowerCase().startsWith(selector.toLocaleLowerCase()));\n\n\tif (possible.length === 0) {\n\t\tpossible = arrayUnique(\n\t\t\titems.map(A => A.Asset.Group.Name)\n\t\t\t\t.concat(items.map(A => A.Asset.Name))\n\t\t).filter(i => i.toLocaleLowerCase().startsWith(selector.toLocaleLowerCase()));\n\t}\n\n\treturn possible;\n}\n\nexport class ModuleCommands extends BaseModule {\n\tload() {\n\t\thookFunction(\"ChatRoomSendChat\", 10, (args, next) => {\n\t\t\tconst chat = document.getElementById(\"InputChat\") as HTMLTextAreaElement | null;\n\t\t\tif (chat) {\n\t\t\t\tconst msg = chat.value.trim();\n\t\t\t\tif (msg.startsWith(\"..\")) {\n\t\t\t\t\tchat.value = msg.substr(1);\n\t\t\t\t} else if (msg.startsWith(\".\")) {\n\t\t\t\t\tif (RunCommand(msg.substr(1))) {\n\t\t\t\t\t\tchat.value = \"\";\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn next(args);\n\t\t});\n\n\t\thookFunction(\"ChatRoomKeyDown\", 10, (args, next) => {\n\t\t\tconst chat = document.getElementById(\"InputChat\") as HTMLTextAreaElement | null;\n\t\t\t// Tab for command completion\n\t\t\tif (KeyPress === 9 && chat && chat.value.startsWith(\".\") && !chat.value.startsWith(\"..\")) {\n\t\t\t\tevent?.preventDefault();\n\n\t\t\t\tchat.value = \".\" + CommandAutocomplete(chat.value.substr(1));\n\t\t\t} else {\n\t\t\t\treturn next(args);\n\t\t\t}\n\t\t});\n\n\t\tregisterCommand(\"help\", \"- display this help [alias: . ]\", () => {\n\t\t\tChatRoomSendLocal(\n\t\t\t\t`Available commands:\\n` +\n\t\t\t\tArray.from(commands.entries())\n\t\t\t\t\t.filter(c => c[1].description !== null)\n\t\t\t\t\t.map(c => `.${c[0]}` + (c[1].description ? ` ${c[1].description}` : \"\"))\n\t\t\t\t\t.sort()\n\t\t\t\t\t.join(\"\\n\")\n\t\t\t);\n\t\t\treturn true;\n\t\t});\n\t\taliasCommand(\"help\", \"\");\n\n\t\tregisterCommand(\"action\", \"- send custom (action) [alias: .a ]\", (msg) => {\n\t\t\tChatRoomActionMessage(msg);\n\t\t\treturn true;\n\t\t});\n\t\taliasCommand(\"action\", \"a\");\n\n\t\tconst ANTIGARBLE_LEVELS: Record<string, number> = {\n\t\t\t\"0\": 0,\n\t\t\t\"1\": 1,\n\t\t\t\"2\": 2,\n\t\t\t\"normal\": 0,\n\t\t\t\"both\": 1,\n\t\t\t\"ungarbled\": 2\n\t\t};\n\n\t\tconst ANTIGARBLE_LEVEL_NAMES: string[] = Object.keys(ANTIGARBLE_LEVELS).filter(k => k.length > 1);\n\n\t\tregisterCommand(\"antigarble\", \"<level> - set garble prevention to show [normal|both|ungarbled] messages (only affects received messages!)\", value => {\n\t\t\tconst val = ANTIGARBLE_LEVELS[value || \"\"];\n\t\t\tif (val !== undefined) {\n\t\t\t\tconsoleInterface.antigarble = val;\n\t\t\t\tChatRoomSendLocal(`Antigarble set to ${ANTIGARBLE_LEVEL_NAMES[val]}`);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tChatRoomSendLocal(`Invalid antigarble level; use ${ANTIGARBLE_LEVEL_NAMES.join(\"/\")}`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, value => {\n\t\t\treturn ANTIGARBLE_LEVEL_NAMES.filter(k => k.length > 1 && k.startsWith(value));\n\t\t});\n\t}\n\n\tunload() {\n\t\tcommands.clear();\n\t}\n}\n","import { Command_selectCharacter, Command_selectCharacterAutocomplete, Command_selectWornItem, Command_selectWornItemAutocomplete, registerCommandParsed } from \"./commands\";\nimport { BaseModule } from \"../moduleManager\";\nimport { ChatRoomSendLocal } from \"../utilsClub\";\n\nexport function InvisibilityEarbuds() {\n\tif (InventoryGet(Player, \"ItemEars\")?.Asset.Name === \"BluetoothEarbuds\") {\n\t\tInventoryRemove(Player, \"ItemEars\");\n\t} else {\n\t\tconst asset = Asset.find(A => A.Name === \"BluetoothEarbuds\");\n\t\tif (!asset) return;\n\t\tPlayer.Appearance = Player.Appearance.filter(A => A.Asset.Group.Name !== \"ItemEars\");\n\t\tPlayer.Appearance.push({\n\t\t\tAsset: asset,\n\t\t\tColor: \"Default\",\n\t\t\tDifficulty: -100,\n\t\t\tProperty: {\n\t\t\t\tType: \"Light\",\n\t\t\t\tEffect: [],\n\t\t\t\tHide: AssetGroup.map(A => A.Name).filter(A => A !== \"ItemEars\")\n\t\t\t}\n\t\t});\n\t\tCharacterRefresh(Player);\n\t}\n\tChatRoomCharacterUpdate(Player);\n}\n\nexport class ModuleClubUtils extends BaseModule {\n\tload() {\n\t\tregisterCommandParsed(\"colour\", \"<source> <item> <target> - Copies color of certain item from source character to target character\",\n\t\t\t(argv) => {\n\t\t\t\tif (argv.length !== 3) {\n\t\t\t\t\tChatRoomSendLocal(`Expected three arguments: <source> <item> <target>`);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst source = Command_selectCharacter(argv[0]);\n\t\t\t\tif (typeof source === \"string\") {\n\t\t\t\t\tChatRoomSendLocal(source);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst target = Command_selectCharacter(argv[2]);\n\t\t\t\tif (typeof target === \"string\") {\n\t\t\t\t\tChatRoomSendLocal(target);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst item = Command_selectWornItem(source, argv[1]);\n\t\t\t\tif (typeof item === \"string\") {\n\t\t\t\t\tChatRoomSendLocal(item);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst targetItem = target.Character.Appearance.find(A => A.Asset === item.Asset);\n\t\t\t\tif (!targetItem) {\n\t\t\t\t\tChatRoomSendLocal(`Target must be wearing the same item`);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\ttargetItem.Color = Array.isArray(item.Color) ? item.Color.slice() : item.Color;\n\t\t\t\tCharacterRefresh(target.Character);\n\t\t\t\tChatRoomCharacterUpdate(target.Character);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t(argv) => {\n\t\t\t\tif (argv.length === 1) {\n\t\t\t\t\treturn Command_selectCharacterAutocomplete(argv[0]);\n\t\t\t\t} else if (argv.length === 2) {\n\t\t\t\t\tconst source = Command_selectCharacter(argv[0]);\n\t\t\t\t\tif (typeof source !== \"string\") {\n\t\t\t\t\t\treturn Command_selectWornItemAutocomplete(source, argv[1]);\n\t\t\t\t\t}\n\t\t\t\t} else if (argv.length === 3) {\n\t\t\t\t\treturn Command_selectCharacterAutocomplete(argv[2]);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t}\n\t\t);\n\t\tregisterCommandParsed(\"allowactivities\", \"<character> <item> - Modifies item to not block activities\",\n\t\t\t(argv) => {\n\t\t\t\tif (argv.length !== 2) {\n\t\t\t\t\tChatRoomSendLocal(`Expected two arguments: <charcater> <item>`);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst char = Command_selectCharacter(argv[0]);\n\t\t\t\tif (typeof char === \"string\") {\n\t\t\t\t\tChatRoomSendLocal(char);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst item = Command_selectWornItem(char, argv[1]);\n\t\t\t\tif (typeof item === \"string\") {\n\t\t\t\t\tChatRoomSendLocal(item);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!item.Property) {\n\t\t\t\t\titem.Property = {};\n\t\t\t\t}\n\t\t\t\titem.Property.AllowActivityOn = AssetGroup.map(A => A.Name);\n\t\t\t\tCharacterRefresh(char.Character);\n\t\t\t\tChatRoomCharacterUpdate(char.Character);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t(argv) => {\n\t\t\t\tif (argv.length === 1) {\n\t\t\t\t\treturn Command_selectCharacterAutocomplete(argv[0]);\n\t\t\t\t} else if (argv.length === 2) {\n\t\t\t\t\tconst source = Command_selectCharacter(argv[0]);\n\t\t\t\t\tif (typeof source !== \"string\") {\n\t\t\t\t\t\treturn Command_selectWornItemAutocomplete(source, argv[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t}\n\t\t);\n\t}\n}\n","import { module_gui } from \"../modules\";\n\nexport abstract class GuiSubscreen {\n\tLoad() {\n\t\t// Empty\n\t}\n\n\tRun() {\n\t\t// Empty\n\t}\n\n\tClick() {\n\t\t// Empty\n\t}\n\n\tExit() {\n\t\tmodule_gui.currentSubscreen = null;\n\t}\n\n\tUnload() {\n\t\t// Empty\n\t}\n\n\tonChange(source: number) {\n\t\t// Empty\n\t}\n}\n","import { ChatroomCharacter } from \"../characters\";\nimport { module_gui } from \"../modules\";\nimport { GuiSubscreen } from \"./subscreen\";\nimport { AccessLevel } from \"../modules/authority\";\nimport { capitalizeFirstLetter } from \"../utils\";\nimport { GuiMainMenu } from \"./mainmenu\";\nimport { GuiAuthorityPermissions } from \"./authority_permissions\";\n\n\n\nexport class GuiAuthorityRoles extends GuiSubscreen {\n\n\treadonly character: ChatroomCharacter;\n\n\tconstructor(character: ChatroomCharacter) {\n\t\tsuper();\n\t\tthis.character = character;\n\t}\n\n\tRun() {\n\n\t\tDrawText(\"Hierarchy of roles:\", 1436, 95, \"Black\");\n\n\t\t// hierarchy background\n\t\tMainCanvas.beginPath();\n\t\tMainCanvas.moveTo(1550, 134);\n\t\tMainCanvas.lineTo(1550 + 150, 134);\n\t\tMainCanvas.lineTo(1550 + 80, 740);\n\t\tMainCanvas.lineTo(1550 + 70, 740);\n\t\tMainCanvas.lineTo(1550, 134);\n\t\tMainCanvas.fillStyle = \"Black\";\n\t\tMainCanvas.fill();\n\n\t\t// hierarchy roles\n\t\tDrawButton(1520, 130, 208, 54, \"\", \"White\");\n\t\tfor (let i = 1; i < 8; i++) {\n\t\t\tDrawButton(1530, 130 + 80 * i, 188, 54, \"\", \"White\");\n\t\t}\n\t\tMainCanvas.textAlign = \"center\";\n\t\tDrawTextFit(`${this.character.Name}`, 1534 + 88, 130 + 28, 198, \"Black\");\n\t\tfor (let i = 1; i < 8; i++) {\n\t\t\tDrawText(capitalizeFirstLetter(AccessLevel[i]), 1534 + 88, 130 + 28 + 80 * i, \"Black\");\n\t\t}\n\t\tMainCanvas.textAlign = \"left\";\n\n\n\n\t\t// Pagination\n\t\tMainCanvas.textAlign = \"center\";\n\t\tDrawBackNextButton(1605, 800, 300, 90, `Page 1 / 1`, \"White\", \"\", () => \"\", () => \"\");\n\t\tMainCanvas.textAlign = \"left\";\n\n\t\tDrawText(`- Authority: Role Settings for ${this.character.Name} -`, 125, 125, \"Black\", \"Gray\");\n\t\tDrawButton(1815, 75, 90, 90, \"\", \"White\", \"Icons/Exit.png\");\n\t\tDrawButton(1815, 190, 90, 90, \"\", \"White\", \"Icons/West.png\");\n\n\t}\n\n\tClick() {\n\t\tif (MouseIn(1815, 75, 90, 90)) return this.Exit();\n\t\tif (MouseIn(1815, 190, 90, 90)) return this.Back();\n\n\t}\n\n\tExit() {\n\t\tmodule_gui.currentSubscreen = new GuiMainMenu(this.character);\n\t}\n\n\tBack() {\n\t\tmodule_gui.currentSubscreen = new GuiAuthorityPermissions(this.character);\n\t}\n}\n","import { ChatroomCharacter } from \"../characters\";\nimport { module_gui } from \"../modules\";\nimport { GuiSubscreen } from \"./subscreen\";\nimport { AccessLevel, PermissionInfo } from \"../modules/authority\";\nimport { capitalizeFirstLetter } from \"../utils\";\n\n\nexport class GuiAuthorityDialogMin extends GuiSubscreen {\n\n\treadonly character: ChatroomCharacter;\n\treadonly permission: BCX_Permissions;\n\tprivate permissionData: PermissionInfo;\n\tprivate myAccessLevel: AccessLevel;\n\tprivate noAccess: boolean;\n\n\tprivate selectedLevel: AccessLevel;\n\n\tpublic back: GuiSubscreen;\n\n\tconstructor(character: ChatroomCharacter, permission: BCX_Permissions, data: PermissionInfo, myAccesLevel: AccessLevel, noAccess: boolean, back: GuiSubscreen) {\n\t\tsuper();\n\t\tthis.character = character;\n\t\tthis.permission = permission;\n\t\tthis.permissionData = data;\n\t\tthis.back = back;\n\t\tthis.myAccessLevel = myAccesLevel;\n\t\tthis.noAccess = noAccess;\n\n\t\tthis.selectedLevel = data.min;\n\t}\n\n\tRun() {\n\n\t\tDrawTextFit(`- Authority: Changing minimum access to permission \"${this.permissionData.name}\" -`, 125, 125, 1850, \"Black\", \"Gray\");\n\t\tMainCanvas.textAlign = \"center\";\n\n\n\t\tDrawText(\"Please select the new lowest role that should still have this permission.\", 1000, 255, \"Black\");\n\t\tDrawTextFit(`Info: Currently set role: ${this.permissionData.min === AccessLevel.self ?\n\t\t\tthis.character.Name : capitalizeFirstLetter(AccessLevel[this.permissionData.min])}  ` +\n\t\t\t`Newly selected role: ${this.selectedLevel === AccessLevel.self ?\n\t\t\t\tthis.character.Name : capitalizeFirstLetter(AccessLevel[this.selectedLevel])}`, 1000, 320, 1850, \"Black\");\n\t\tDrawText(\"All roles to the left of the selected one will also automatically get access.\", 1000, 385, \"Black\");\n\n\t\tif (this.myAccessLevel === AccessLevel.self) {\n\t\t\tconst available = (this.permissionData.min <= AccessLevel.self) || !this.noAccess;\n\t\t\tDrawButton(1000-110, 460, 220, 72, \"\", this.selectedLevel === AccessLevel.self ? \"Cyan\" : available ? \"White\" : \"#eee\", undefined, undefined, !available);\n\t\t\tDrawTextFit(`${this.character.Name}`, 1000, 460 + 36, 210, \"Black\");\n\t\t}\n\n\t\tfor (let i = 1; i < 8; i++) {\n\t\t\tconst current = this.selectedLevel === i;\n\t\t\tconst available =\n\t\t\t\t(this.myAccessLevel === AccessLevel.self && this.permissionData.min <= i && i <= AccessLevel.owner) ||\n\t\t\t\t!this.noAccess && this.myAccessLevel <= i;\n\t\t\tDrawButton(-15 + 230 * i, 577, 190, 72, \"\", current ? \"Cyan\" : available ? \"White\" : \"#eee\", undefined, undefined, !available);\n\t\t\tif (i < 7)\n\t\t\t\tDrawText(\">\", 196 + 230 * i, 577 + 36, \"Black\");\n\t\t\tDrawText(capitalizeFirstLetter(AccessLevel[i]), 80 + 230 * i, 577 + 36, \"Black\");\n\t\t}\n\n\t\tif (this.character.isPlayer() && this.permission === \"authority_revoke_self\" && this.selectedLevel !== AccessLevel.self) {\n\t\t\tDrawText(`WARNING: If you confirm, all permitted roles can remove your access to this and all other permissions!`, 1000, 730, \"Red\", \"Gray\");\n\t\t}\n\n\t\tDrawButton(700, 800, 200, 80, \"\", \"White\");\n\t\tDrawText(\"Confirm\", 800, 840, \"Black\");\n\n\t\tDrawButton(1120, 800, 200, 80, \"\", \"White\");\n\t\tDrawText(\"Cancel\", 1220, 840, \"Black\");\n\n\t}\n\n\tClick() {\n\t\tif (MouseIn(700, 800, 200, 80)) return this.Confirm();\n\t\tif (MouseIn(1120, 800, 200, 80)) return this.Exit();\n\n\t\tif (MouseIn(1000-110, 460, 220, 72) && this.myAccessLevel === AccessLevel.self) {\n\t\t\tconst available = (this.permissionData.min <= AccessLevel.self) || !this.noAccess;\n\t\t\tif (available) {\n\t\t\t\tthis.selectedLevel = AccessLevel.self;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 1; i < 8; i++) {\n\t\t\tconst current = this.selectedLevel === i;\n\t\t\tconst available =\n\t\t\t\t(this.myAccessLevel === AccessLevel.self && this.permissionData.min <= i && i <= AccessLevel.owner) ||\n\t\t\t\t!this.noAccess && this.myAccessLevel <= i;\n\t\t\tif (MouseIn(-15 + 230 * i, 577, 190, 72) && !current && available) {\n\t\t\t\tthis.selectedLevel = i;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tConfirm() {\n\t\tthis.character.setPermission(this.permission, \"min\", this.selectedLevel);\n\t}\n\n\tExit() {\n\t\tmodule_gui.currentSubscreen = this.back;\n\t}\n\n\tonChange() {\n\t\t// When something changes, we bail from change dialog, because it might no longer be valid\n\t\tthis.Exit();\n\t}\n}\n","import { ChatroomCharacter } from \"../characters\";\nimport { module_gui } from \"../modules\";\nimport { GuiSubscreen } from \"./subscreen\";\nimport { PermissionInfo } from \"../modules/authority\";\n\nexport class GuiAuthorityDialogSelf extends GuiSubscreen {\n\n\treadonly character: ChatroomCharacter;\n\treadonly permission: BCX_Permissions;\n\tprivate permissionData: PermissionInfo;\n\n\tpublic back: GuiSubscreen;\n\n\tconstructor(character: ChatroomCharacter, permission: BCX_Permissions, data: PermissionInfo, back: GuiSubscreen) {\n\t\tsuper();\n\t\tthis.character = character;\n\t\tthis.permission = permission;\n\t\tthis.permissionData = data;\n\t\tthis.back = back;\n\t}\n\n\tRun() {\n\n\t\tDrawTextFit(`- Authority: Removing self access to permission \"${this.permissionData.name}\" -`, 125, 125, 1850, \"Black\", \"Gray\");\n\t\tMainCanvas.textAlign = \"center\";\n\n\t\tDrawText(\"- Warning -\", 1000, 375, \"Black\", \"Black\");\n\t\tDrawText(\"If you confirm, you won't be able to change your access to this permission back yourself.\", 1000, 525, \"Black\");\n\n\t\tDrawButton(700, 720, 200, 80, \"\", \"White\");\n\t\tDrawText(\"Confirm\", 800, 760, \"Black\");\n\n\t\tDrawButton(1120, 720, 200, 80, \"\", \"White\");\n\t\tDrawText(\"Cancel\", 1220, 760, \"Black\");\n\n\t}\n\n\tClick() {\n\t\tif (MouseIn(700, 720, 200, 80)) return this.Confirm();\n\t\tif (MouseIn(1120, 720, 200, 80)) return this.Exit();\n\n\t}\n\n\tConfirm() {\n\t\tthis.character.setPermission(this.permission, \"self\", false);\n\t}\n\n\tExit() {\n\t\tmodule_gui.currentSubscreen = this.back;\n\t}\n\n\tonChange() {\n\t\t// When something changes, we bail from change dialog, because it might no longer be valid\n\t\tthis.Exit();\n\t}\n}\n","import { ChatroomCharacter, getPlayerCharacter } from \"../characters\";\nimport { ModuleCategory, MODULE_ICONS, MODULE_NAMES } from \"../moduleManager\";\nimport { module_gui } from \"../modules\";\nimport { AccessLevel, checkPermisionAccesData, checkPermissionAccess, PermissionData, PermissionInfo } from \"../modules/authority\";\nimport { icon_OwnerList } from \"../resources\";\nimport { capitalizeFirstLetter } from \"../utils\";\nimport { DrawImageEx } from \"../utilsClub\";\nimport { GuiMainMenu } from \"./mainmenu\";\nimport { GuiSubscreen } from \"./subscreen\";\nimport { GuiAuthorityRoles } from \"./authority_roles\";\nimport { GuiAuthorityDialogMin } from \"./authority_dialogMin\";\nimport { GuiAuthorityDialogSelf } from \"./authority_dialogSelf\";\n\ntype PermListItem = (\n\t{\n\t\tseparator: false;\n\t\tpermission: BCX_Permissions;\n\t\tpermissionInfo: PermissionInfo;\n\t\teditSelf: boolean;\n\t\teditMin: boolean;\n\t} | {\n\t\tseparator: true;\n\t\tname: string;\n\t}\n);\n\nconst PER_PAGE_COUNT = 6;\n\nexport class GuiAuthorityPermissions extends GuiSubscreen {\n\n\treadonly character: ChatroomCharacter;\n\tprivate permissionData: PermissionData | null = null;\n\tprivate myAccessLevel: AccessLevel = AccessLevel.public;\n\tprivate failed: boolean = false;\n\tprivate permList: PermListItem[] = [];\n\tprivate page: number = 0;\n\n\tconstructor(character: ChatroomCharacter) {\n\t\tsuper();\n\t\tthis.character = character;\n\t\tif (this.character.isPlayer()) {\n\t\t\tthis.myAccessLevel = AccessLevel.self;\n\t\t}\n\t}\n\n\tLoad() {\n\t\tthis.requestData();\n\t}\n\n\tonChange(sender: number) {\n\t\tif (sender === this.character.MemberNumber) {\n\t\t\tthis.requestData();\n\t\t}\n\t}\n\n\tprivate requestData() {\n\t\tthis.permissionData = null;\n\t\tthis.rebuildList();\n\t\tPromise.all([this.character.getPermissions(), this.character.getMyAccessLevel()]).then(res => {\n\t\t\tthis.permissionData = res[0];\n\t\t\tthis.myAccessLevel = res[1];\n\t\t\tthis.rebuildList();\n\t\t}, err => {\n\t\t\tconsole.error(`BCX: Failed to get permission info for ${this.character}`, err);\n\t\t\tthis.failed = true;\n\t\t});\n\t}\n\n\tprivate rebuildList() {\n\t\tconst categories: Map<ModuleCategory, PermissionData> = new Map();\n\t\tthis.permList = [];\n\t\tthis.page = 0;\n\t\tlet Input = document.getElementById(\"BCX_PermissionsFilter\") as HTMLInputElement | undefined;\n\t\tif (this.permissionData === null) {\n\t\t\tif (Input) {\n\t\t\t\tInput.remove();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Input) {\n\t\t\tInput = ElementCreateInput(\"BCX_PermissionsFilter\", \"text\", \"\", \"30\");\n\t\t\tInput.addEventListener(\"input\", ev => {\n\t\t\t\tthis.rebuildList();\n\t\t\t});\n\t\t}\n\n\t\tconst filter = Input.value.trim().toLocaleLowerCase().split(\" \");\n\n\t\tconst access_grantSelf = this.permissionData.authority_grant_self ?\n\t\t\tcheckPermisionAccesData(this.permissionData.authority_grant_self, this.myAccessLevel) :\n\t\t\tfalse;\n\t\tconst access_revokeSelf = this.permissionData.authority_revoke_self ?\n\t\t\tcheckPermisionAccesData(this.permissionData.authority_revoke_self, this.myAccessLevel) :\n\t\t\tfalse;\n\t\tconst access_editMin = this.permissionData.authority_edit_min ?\n\t\t\tcheckPermisionAccesData(this.permissionData.authority_edit_min, this.myAccessLevel) :\n\t\t\tfalse;\n\t\tconst isPlayer = this.myAccessLevel === AccessLevel.self;\n\n\t\tfor (const [k, v] of Object.entries(this.permissionData)) {\n\t\t\tlet permdata = categories.get(v.category);\n\t\t\tif (filter.some(i =>\n\t\t\t\t!MODULE_NAMES[v.category].toLocaleLowerCase().includes(i) &&\n\t\t\t\t!v.name.toLocaleLowerCase().includes(i) &&\n\t\t\t\t!k.toLocaleLowerCase().includes(i)\n\t\t\t)) continue;\n\t\t\tif (!permdata) {\n\t\t\t\tcategories.set(v.category, permdata = {});\n\t\t\t}\n\t\t\tpermdata[k as BCX_Permissions] = v;\n\t\t}\n\t\tfor (const [category, data] of Array.from(categories.entries()).sort((a, b) => a[0] - b[0])) {\n\t\t\tthis.permList.push({\n\t\t\t\tseparator: true,\n\t\t\t\tname: MODULE_NAMES[category]\n\t\t\t});\n\t\t\tfor (const [k, v] of Object.entries(data).sort((a, b) => a[1].name.localeCompare(b[1].name))) {\n\t\t\t\tconst access = checkPermisionAccesData(v, this.myAccessLevel);\n\t\t\t\tthis.permList.push({\n\t\t\t\t\tseparator: false,\n\t\t\t\t\tpermission: k as BCX_Permissions,\n\t\t\t\t\tpermissionInfo: v,\n\t\t\t\t\teditSelf:\n\t\t\t\t\t\t// character must have access to \"allow granting/forbidding self access\"\n\t\t\t\t\t\t(v.self ? access_revokeSelf : access_grantSelf) &&\n\t\t\t\t\t\t// Not player must have access to target rule\n\t\t\t\t\t\t(isPlayer || access) &&\n\t\t\t\t\t\t// \"minimal access\" set to \"Self\" forces \"self access\" to \"Yes\"\n\t\t\t\t\t\t(!v.self || v.min !== AccessLevel.self),\n\t\t\t\t\teditMin:\n\t\t\t\t\t\t// Exception: Player can always lower permissions \"Self\"->\"Owner\"\n\t\t\t\t\t\t(isPlayer && v.min < AccessLevel.owner) ||\n\t\t\t\t\t\t// Character must have access to \"allow minimal access modification\" &&\n\t\t\t\t\t\t// Character must have access to target rule\n\t\t\t\t\t\t(access_editMin && access)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tRun() {\n\t\tif (this.permissionData !== null) {\n\n\t\t\tDrawTextFit(this.character.Name, 1111, 190, 189, \"Black\");\n\t\t\tDrawText(\"is permitted\", 1111, 235, \"Black\");\n\t\t\tDrawText(\"Lowest permitted role\", 1370, 235, \"Black\");\n\t\t\tMainCanvas.beginPath();\n\t\t\tMainCanvas.moveTo(1335, 230);\n\t\t\tMainCanvas.lineTo(1335, 230 + 610);\n\t\t\tMainCanvas.stroke();\n\n\t\t\t// filter\n\t\t\tDrawText(\"Filter:\", 130, 215, \"Black\");\n\t\t\tElementPosition(\"BCX_PermissionsFilter\", 550, 210, 600, 64);\n\n\t\t\t//reset button\n\t\t\tif ((document.getElementById(\"BCX_PermissionsFilter\") as HTMLInputElement | undefined)?.value) {\n\t\t\t\tDrawButton(870, 182, 64, 64, \"\", \"White\");\n\t\t\t\tDrawText(\"X\", 890, 217, \"Black\");\n\t\t\t}\n\n\t\t\tfor (let off = 0; off < PER_PAGE_COUNT; off++) {\n\t\t\t\tconst i = this.page * PER_PAGE_COUNT + off;\n\t\t\t\tif (i >= this.permList.length) break;\n\t\t\t\tconst e = this.permList[i];\n\n\t\t\t\tconst Y = 275 + off * 100;\n\n\t\t\t\tif (e.separator) {\n\t\t\t\t\t// idea to highlight the section separator\n\t\t\t\t\tMainCanvas.beginPath();\n\t\t\t\t\tMainCanvas.rect(125, Y, 1173, 64);\n\t\t\t\t\tMainCanvas.fillStyle = \"#eeeeee\";\n\t\t\t\t\tMainCanvas.fill();\n\t\t\t\t\tDrawText(`${e.name} module permissions`, 140, Y + 34, \"Black\");\n\t\t\t\t} else {\n\t\t\t\t\tDrawImageEx(MODULE_ICONS[e.permissionInfo.category], 125, Y, {\n\t\t\t\t\t\tHeight: 64,\n\t\t\t\t\t\tWidth: 64\n\t\t\t\t\t});\n\t\t\t\t\t// Permission name\n\t\t\t\t\tDrawButton(200, Y, 1000, 64, \"\", \"White\");\n\t\t\t\t\tDrawTextFit(e.permissionInfo.name, 210, Y + 34, 990, \"Black\");\n\t\t\t\t\t// Self checkbox\n\t\t\t\t\tDrawButton(1235, Y, 64, 64, \"\", e.editSelf ? \"White\" : \"#eee\", e.permissionInfo.self ? \"Icons/Checked.png\" : \"\", undefined, !e.editSelf);\n\t\t\t\t\t// Min access\n\t\t\t\t\tDrawButton(1370, Y, 170, 64, \"\", e.editMin ? \"White\" : \"#eee\", undefined, undefined, !e.editMin);\n\t\t\t\t\tMainCanvas.textAlign = \"center\";\n\t\t\t\t\tDrawTextFit(e.permissionInfo.min === AccessLevel.self ? this.character.Name : capitalizeFirstLetter(AccessLevel[e.permissionInfo.min]), 1453, Y + 34, 150, \"Black\");\n\t\t\t\t\tMainCanvas.textAlign = \"left\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Pagination\n\t\t\tconst totalPages = Math.max(1, Math.ceil(this.permList.length / PER_PAGE_COUNT));\n\t\t\tMainCanvas.textAlign = \"center\";\n\t\t\tDrawBackNextButton(1605, 800, 300, 90, `${DialogFindPlayer(\"Page\")} ${this.page + 1} / ${totalPages}`, \"White\", \"\", () => \"\", () => \"\");\n\t\t} else if (this.failed) {\n\t\t\tMainCanvas.textAlign = \"center\";\n\t\t\tDrawText(`Failed to get permission data from ${this.character.Name}. Maybe you have no access?`, 1000, 480, \"Black\");\n\t\t} else {\n\t\t\tMainCanvas.textAlign = \"center\";\n\t\t\tDrawText(\"Loading...\", 1000, 480, \"Black\");\n\t\t}\n\n\t\tMainCanvas.textAlign = \"left\";\n\n\t\tDrawText(`- Authority: Permission Settings for ${this.character.Name} -`, 125, 125, \"Black\", \"Gray\");\n\t\tDrawButton(1815, 75, 90, 90, \"\", \"White\", \"Icons/Exit.png\");\n\t\tDrawButton(1815, 190, 90, 90, \"\", \"White\", icon_OwnerList);\n\t}\n\n\tClick() {\n\t\tif (MouseIn(1815, 75, 90, 90)) return this.Exit();\n\n\t\t// Owner list\n\t\tif (MouseIn(1815, 190, 90, 90)) return module_gui.currentSubscreen = new GuiAuthorityRoles(this.character);\n\n\t\tif (this.permissionData !== null) {\n\n\t\t\t//reset button\n\t\t\tconst elem = document.getElementById(\"BCX_PermissionsFilter\") as HTMLInputElement | undefined;\n\t\t\tif (MouseIn(870, 182, 64, 64) && elem) {\n\t\t\t\telem.value = \"\";\n\t\t\t\tthis.rebuildList();\n\t\t\t}\n\n\t\t\tfor (let off = 0; off < PER_PAGE_COUNT; off++) {\n\t\t\t\tconst i = this.page * PER_PAGE_COUNT + off;\n\t\t\t\tif (i >= this.permList.length) break;\n\t\t\t\tconst e = this.permList[i];\n\n\t\t\t\tconst Y = 275 + i * 100;\n\n\t\t\t\tif (!e.separator) {\n\t\t\t\t\t// Permission name\n\t\t\t\t\tif (MouseIn(200, Y, 1000, 64)) {\n\t\t\t\t\t\t// TODO\n\t\t\t\t\t}\n\t\t\t\t\t// Self checkbox\n\t\t\t\t\tif (MouseIn(1235, Y, 64, 64) && e.editSelf) {\n\t\t\t\t\t\tif (e.permissionInfo.self &&\n\t\t\t\t\t\t\tthis.character.isPlayer() &&\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\te.permission === \"authority_grant_self\" ||\n\t\t\t\t\t\t\t\t!checkPermissionAccess(\"authority_grant_self\", getPlayerCharacter())\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// If Player couldn't switch back on, show warning instead\n\t\t\t\t\t\t\tmodule_gui.currentSubscreen = new GuiAuthorityDialogSelf(this.character, e.permission, e.permissionInfo, this);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.character.setPermission(e.permission, \"self\", !e.permissionInfo.self);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Min access\n\t\t\t\t\tif (MouseIn(1370, Y, 170, 64) && e.editMin) {\n\t\t\t\t\t\tconst access_editMin = this.permissionData.authority_edit_min ?\n\t\t\t\t\t\t\tcheckPermisionAccesData(this.permissionData.authority_edit_min, this.myAccessLevel) :\n\t\t\t\t\t\t\tfalse;\n\t\t\t\t\t\tmodule_gui.currentSubscreen = new GuiAuthorityDialogMin(\n\t\t\t\t\t\t\tthis.character,\n\t\t\t\t\t\t\te.permission,\n\t\t\t\t\t\t\te.permissionInfo,\n\t\t\t\t\t\t\tthis.myAccessLevel,\n\t\t\t\t\t\t\t!access_editMin || !checkPermisionAccesData(e.permissionInfo, this.myAccessLevel),\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Pagination\n\t\t\tconst totalPages = Math.ceil(this.permList.length / PER_PAGE_COUNT);\n\t\t\tif (MouseIn(1455, 800, 150, 90)) {\n\t\t\t\tthis.page--;\n\t\t\t\tif (this.page < 0) {\n\t\t\t\t\tthis.page = Math.max(totalPages - 1, 0);\n\t\t\t\t}\n\t\t\t} else if (MouseIn(1605, 800, 150, 90)) {\n\t\t\t\tthis.page++;\n\t\t\t\tif (this.page >= totalPages) {\n\t\t\t\t\tthis.page = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tExit() {\n\t\tmodule_gui.currentSubscreen = new GuiMainMenu(this.character);\n\t}\n\n\tUnload() {\n\t\tElementRemove(\"BCX_PermissionsFilter\");\n\t}\n}\n","import { ChatroomCharacter } from \"../characters\";\nimport { ModuleCategory, MODULE_ICONS, MODULE_NAMES } from \"../moduleManager\";\nimport { module_gui } from \"../modules\";\nimport { GuiAuthorityPermissions } from \"./authority_permissions\";\nimport { GuiSubscreen } from \"./subscreen\";\n\nconst MAIN_MENU_ITEMS: {module: ModuleCategory; onclick: (C: ChatroomCharacter) => void; }[] = [\n\t{\n\t\tmodule: ModuleCategory.Basic,\n\t\tonclick: () => null\n\t},\n\t{\n\t\tmodule: ModuleCategory.Authority,\n\t\tonclick: (C) => {\n\t\t\tmodule_gui.currentSubscreen = new GuiAuthorityPermissions(C);\n\t\t}\n\t},\n\t{\n\t\tmodule: ModuleCategory.Misc,\n\t\tonclick: () => null\n\t}\n];\n\nexport class GuiMainMenu extends GuiSubscreen {\n\n\treadonly character: ChatroomCharacter;\n\n\tconstructor(character: ChatroomCharacter) {\n\t\tsuper();\n\t\tthis.character = character;\n\t}\n\n\tRun() {\n\t\tDrawText(\"- Bondage Club Extended -\", 125, 125, \"Black\", \"Gray\");\n\t\tDrawButton(1815, 75, 90, 90, \"\", \"White\", \"Icons/Exit.png\");\n\n\t\tfor (let i = 0; i < MAIN_MENU_ITEMS.length; i++) {\n\t\t\tconst e = MAIN_MENU_ITEMS[i];\n\t\t\tconst PX = Math.floor(i / 7);\n\t\t\tconst PY = i % 7;\n\t\t\tDrawButton(150 + 420 * PX, 160 + 110 * PY, 400, 90, \"\", \"White\", MODULE_ICONS[e.module]);\n\t\t\tDrawTextFit(MODULE_NAMES[e.module], 250 + 420 * PX, 205 + 110 * PY, 310, \"Black\");\n\t\t}\n\t}\n\n\tClick() {\n\t\tif (MouseIn(1815, 75, 90, 90)) return this.Exit();\n\n\t\tfor (let i = 0; i < MAIN_MENU_ITEMS.length; i++) {\n\t\t\tconst e = MAIN_MENU_ITEMS[i];\n\t\t\tconst PX = Math.floor(i / 7);\n\t\t\tconst PY = i % 7;\n\t\t\tif (MouseIn(150 + 420 * PX, 160 + 110 * PY, 400, 90)) {\n\t\t\t\treturn e.onclick(this.character);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { ChatroomCharacter, getChatroomCharacter } from \"../characters\";\nimport { GuiMainMenu } from \"../gui/mainmenu\";\nimport { GuiSubscreen } from \"../gui/subscreen\";\nimport { BaseModule } from \"../moduleManager\";\nimport { hookFunction, patchFunction } from \"../patching\";\nimport { icon_BCX } from \"../resources\";\nimport { changeHandlers } from \"./messaging\";\n\nexport class ModuleGUI extends BaseModule {\n\tprivate _currentSubscreen: GuiSubscreen | null = null;\n\n\tget currentSubscreen(): GuiSubscreen | null {\n\t\treturn this._currentSubscreen;\n\t}\n\n\tset currentSubscreen(subscreen: GuiSubscreen | null) {\n\t\tif (this._currentSubscreen) {\n\t\t\tthis._currentSubscreen.Unload();\n\t\t}\n\t\tthis._currentSubscreen = subscreen;\n\t\tif (this._currentSubscreen) {\n\t\t\tthis._currentSubscreen.Load();\n\t\t}\n\t}\n\n\tgetInformationSheetCharacter(): ChatroomCharacter | null {\n\t\tconst C = InformationSheetSelection;\n\t\tif (!C || typeof C.MemberNumber !== \"number\") return null;\n\t\treturn getChatroomCharacter(C.MemberNumber);\n\t}\n\n\tinit() {\n\t\tchangeHandlers.push(source => {\n\t\t\tif (this._currentSubscreen) {\n\t\t\t\tthis._currentSubscreen.onChange(source);\n\t\t\t}\n\t\t});\n\t}\n\n\tload() {\n\t\tpatchFunction(\"InformationSheetRun\", {\n\t\t\t'DrawButton(1815, 765, 90, 90,': 'DrawButton(1815, 800, 90, 90,'\n\t\t});\n\t\tpatchFunction(\"InformationSheetClick\", {\n\t\t\t'MouseIn(1815, 765, 90, 90)': 'MouseIn(1815, 800, 90, 90)'\n\t\t});\n\t\thookFunction(\"InformationSheetRun\", 10, (args, next) => {\n\t\t\tif (this._currentSubscreen) {\n\t\t\t\tMainCanvas.textAlign = \"left\";\n\t\t\t\tthis._currentSubscreen.Run();\n\t\t\t\tMainCanvas.textAlign = \"center\";\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnext(args);\n\t\t\tconst C = this.getInformationSheetCharacter();\n\t\t\tif (C && C.BCXVersion !== null) {\n\t\t\t\tDrawButton(1815, 685, 90, 90, \"\", \"White\", icon_BCX, \"BCX\");\n\t\t\t}\n\t\t});\n\n\t\thookFunction(\"InformationSheetClick\", 10, (args, next) => {\n\t\t\tif (this._currentSubscreen) {\n\t\t\t\treturn this._currentSubscreen.Click();\n\t\t\t}\n\n\t\t\tconst C = this.getInformationSheetCharacter();\n\t\t\tif (C && C.BCXVersion !== null && MouseIn(1815, 685, 90, 90)) {\n\t\t\t\tthis.currentSubscreen = new GuiMainMenu(C);\n\t\t\t} else {\n\t\t\t\treturn next(args);\n\t\t\t}\n\t\t});\n\n\t\thookFunction(\"InformationSheetExit\", 10, (args, next) => {\n\t\t\tif (this._currentSubscreen) {\n\t\t\t\treturn this._currentSubscreen.Exit();\n\t\t\t}\n\n\t\t\treturn next(args);\n\t\t});\n\t}\n\n\tunload() {\n\t\tthis.currentSubscreen = null;\n\t}\n}\n","import { detectOtherMods } from \"../utilsClub\";\nimport { allowMode } from \"./console\";\nimport { BaseModule, ModuleCategory } from \"../moduleManager\";\nimport { hookFunction, patchFunction } from \"../patching\";\nimport { AccessLevel, registerPermission } from \"./authority\";\n\nexport class ModuleMiscPatches extends BaseModule {\n\tprivate o_Player_CanChange: (typeof Player.CanChange) | null = null;\n\n\tinit() {\n\t\tregisterPermission(\"misc_test\", {\n\t\t\tname: \"Some permission to test things\",\n\t\t\tcategory: ModuleCategory.Misc,\n\t\t\tmin: AccessLevel.public,\n\t\t\tself: false\n\t\t});\n\t}\n\n\tload() {\n\t\thookFunction(\"AsylumEntranceCanWander\", 0, () => true);\n\t\tpatchFunction(\"CheatImport\", { \"MainCanvas == null\": \"true\" });\n\n\t\thookFunction(\"ElementIsScrolledToEnd\", 0, (args) => {\n\t\t\tconst element = document.getElementById(args[0]);\n\t\t\treturn element != null && element.scrollHeight - element.scrollTop - element.clientHeight <= 1;\n\t\t});\n\n\t\tconst { NMod } = detectOtherMods();\n\n\t\tif (!NMod) {\n\t\t\tpatchFunction(\"LoginMistressItems\", { 'LogQuery(\"ClubMistress\", \"Management\")': \"true\" });\n\t\t\tpatchFunction(\"LoginStableItems\", { 'LogQuery(\"JoinedStable\", \"PonyExam\") || LogQuery(\"JoinedStable\", \"TrainerExam\")': \"true\" });\n\t\t}\n\n\t\t// Cheats\n\n\t\tthis.o_Player_CanChange = Player.CanChange;\n\t\tPlayer.CanChange = () => allowMode || !!(this.o_Player_CanChange?.call(Player));\n\n\t\thookFunction(\"ChatRoomCanLeave\", 0, (args, next) => allowMode || next(args));\n\t}\n\n\trun() {\n\t\tCheatImport();\n\t\tLoginMistressItems();\n\t\tLoginStableItems();\n\t\tServerPlayerInventorySync();\n\t}\n\n\tunload() {\n\t\tif (this.o_Player_CanChange) {\n\t\t\tPlayer.CanChange = this.o_Player_CanChange;\n\t\t}\n\t}\n}\n","import { VERSION, VERSION_CHECK_BOT } from \"../config\";\nimport { hiddenBeepHandlers, sendHiddenBeep } from \"./messaging\";\nimport { BaseModule } from \"../moduleManager\";\nimport { isObject } from \"../utils\";\n\nlet nextCheckTimer: number | null = null;\n\nfunction sendVersionCheckBeep(): void {\n\tif (nextCheckTimer !== null) {\n\t\tclearTimeout(nextCheckTimer);\n\t\tnextCheckTimer = null;\n\t}\n\n\tsendHiddenBeep(\"versionCheck\", {\n\t\tversion: VERSION,\n\t\tUA: window.navigator.userAgent\n\t}, VERSION_CHECK_BOT, true);\n\n\t// Set check retry timer to 5 minutes\n\tnextCheckTimer = setTimeout(sendVersionCheckBeep, 5 * 60_000);\n}\n\nexport class ModuleVersionCheck extends BaseModule {\n\tload() {\n\t\thiddenBeepHandlers.set(\"versionResponse\", (sender, message: BCX_beep_versionResponse) => {\n\t\t\tif (sender !== VERSION_CHECK_BOT) {\n\t\t\t\tconsole.warn(`BCX: got versionResponse from unexpected sender ${sender}, ignoring`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isObject(message) || typeof message.status !== \"string\") {\n\t\t\t\tconsole.warn(`BCX: bad versionResponse`, message);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Got valid version response, reset timer to 15 minutes\n\t\t\tif (nextCheckTimer !== null) {\n\t\t\t\tclearTimeout(nextCheckTimer);\n\t\t\t}\n\t\t\tnextCheckTimer = setTimeout(sendVersionCheckBeep, 15 * 60_000);\n\n\t\t\tif (message.status === \"current\") {\n\t\t\t\treturn;\n\t\t\t} else if (message.status === \"newAvailable\") {\n\t\t\t\t// TODO\n\t\t\t} else if (message.status === \"deprecated\") {\n\t\t\t\t// TODO\n\t\t\t} else if (message.status === \"unsupported\") {\n\t\t\t\t// TODO\n\t\t\t} else {\n\t\t\t\tconsole.warn(`BCX: bad versionResponse status \"${message.status}\"`);\n\t\t\t}\n\t\t});\n\t}\n\n\trun() {\n\t\tsendVersionCheckBeep();\n\t}\n\n\tunload() {\n\t\tif (nextCheckTimer !== null) {\n\t\t\tclearTimeout(nextCheckTimer);\n\t\t\tnextCheckTimer = null;\n\t\t}\n\t}\n}\n","import { registerModule } from \"./moduleManager\";\n\nimport { ModuleAuthority } from \"./modules/authority\";\nimport { ModuleChatroom } from \"./modules/chatroom\";\nimport { ModuleClubUtils } from \"./modules/clubUtils\";\nimport { ModuleCommands } from \"./modules/commands\";\nimport { ModuleGUI } from \"./modules/gui\";\nimport { ModuleConsole } from \"./modules/console\";\nimport { ModuleMessaging } from \"./modules/messaging\";\nimport { ModuleMiscPatches } from \"./modules/miscPatches\";\nimport { ModuleStorage } from \"./modules/storage\";\nimport { ModuleVersionCheck } from \"./modules/versionCheck\";\nimport { ModuleWardrobe } from \"./modules/wardrobe\";\n\nexport const module_authority = registerModule(new ModuleAuthority());\nexport const module_chatroom = registerModule(new ModuleChatroom());\nexport const module_clubUtils = registerModule(new ModuleClubUtils());\nexport const module_commands = registerModule(new ModuleCommands());\nexport const module_console = registerModule(new ModuleConsole());\nexport const module_gui = registerModule(new ModuleGUI());\nexport const module_messaging = registerModule(new ModuleMessaging());\nexport const module_miscPatches = registerModule(new ModuleMiscPatches());\nexport const module_storage = registerModule(new ModuleStorage());\nexport const module_versionCheck = registerModule(new ModuleVersionCheck());\nexport const module_wardrobe = registerModule(new ModuleWardrobe());\n","import { InfoBeep } from \"./utilsClub\";\nimport { hookFunction } from \"./patching\";\nimport { init, loginInit } from \"./main\";\n\nimport \"./modules\";\n\nasync function initWait() {\n\tif (CurrentScreen == null || CurrentScreen === \"Login\") {\n\t\thookFunction(\"LoginResponse\", 0, (args, next) => {\n\t\t\tnext(args);\n\t\t\tloginInit(args[0]);\n\t\t});\n\t\tInfoBeep(`BCX Ready!`);\n\t} else {\n\t\tinit();\n\t}\n}\n\ninitWait();\n"],"names":[],"mappings":"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"}